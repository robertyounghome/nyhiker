!function(){var t,e,n,r={23886:function(){!function(t,e,n,r,i,s){t.ddjskey="9D463B509A4C91FDFF39B265B3E2BC",t.ddoptions={ajaxListenerPath:!0,allowHtmlContentTypeOnCaptcha:!0}||null;var o=e.createElement(n),a=e.getElementsByTagName(n)[0];o.async=1,o.src="https://js.datadome.co/tags.js",a.parentNode.insertBefore(o,a)}(window,document,"script")},22338:function(t){t.exports=(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{anonymizeUser:()=>r,getAmplitudeInstance:()=>n,setProperties:()=>i});var n=function(){var t={init:function(){},logEvent:function(){},getUserId:function(){return null},setUserId:function(){},regenerateDeviceId:function(){},setUserProperties:function(){}};return window.amplitude&&(t=window.amplitude.getInstance()),t},r=function(){n().setUserId(null),n().regenerateDeviceId()},i=function(t){n().setUserProperties(t)};return e})()},97748:function(t){t.exports=function(){var t,e=["navigation","request","process","log","user","state","error","manual"],n=function(t,e,n){for(var r=n,i=0,s=t.length;i<s;i++)r=e(r,t[i],i,t);return r},r=function(t,e){return n(t,(function(t,n,r,i){return e(n,r,i)?t.concat(n):t}),[])},i=function(t,e){return n(t,(function(t,n,r,i){return!0===t||n===e}),!1)},s=function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(t){var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);if(!o)return n;for(var r=0,i=a.length;r<i;r++)Object.prototype.hasOwnProperty.call(t,a[r])&&n.push(a[r]);return n},l=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=1/0),function(n){return"number"===typeof n&&parseInt(""+n,10)===n&&n>=t&&n<=e}},c=function(t){return"function"===typeof t||s(t)&&r(t,(function(t){return"function"===typeof t})).length===t.length},h=function(t){return"string"===typeof t&&!!t.length},d={},f=function(){return{unhandledExceptions:!0,unhandledRejections:!0}};d.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:h},appVersion:{defaultValue:function(){},message:"should be a string",validate:function(t){return void 0===t||h(t)}},appType:{defaultValue:function(){},message:"should be a string",validate:function(t){return void 0===t||h(t)}},autoDetectErrors:{defaultValue:function(){return!0},message:"should be true|false",validate:function(t){return!0===t||!1===t}},enabledErrorTypes:{defaultValue:function(){return f()},message:"should be an object containing the flags { unhandledExceptions:true|false, unhandledRejections:true|false }",allowPartialObject:!0,validate:function(t){if("object"!==typeof t||!t)return!1;var e=u(t),n=u(f());return!(r(e,(function(t){return i(n,t)})).length<e.length)&&!(r(u(t),(function(e){return"boolean"!==typeof t[e]})).length>0)}},onError:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:c},onSession:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:c},onBreadcrumb:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:c},endpoints:{defaultValue:function(){return{notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}},message:"should be an object containing endpoint URLs { notify, sessions }",validate:function(t){return t&&"object"===typeof t&&h(t.notify)&&h(t.sessions)&&0===r(u(t),(function(t){return!i(["notify","sessions"],t)})).length}},autoTrackSessions:{defaultValue:function(t){return!0},message:"should be true|false",validate:function(t){return!0===t||!1===t}},enabledReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(t){return null===t||s(t)&&r(t,(function(t){return"string"===typeof t})).length===t.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(t){return"string"===typeof t&&t.length}},maxBreadcrumbs:{defaultValue:function(){return 25},message:"should be a number \u2264100",validate:function(t){return l(0,100)(t)}},enabledBreadcrumbTypes:{defaultValue:function(){return e},message:"should be null or a list of available breadcrumb types ("+e.join(",")+")",validate:function(t){return null===t||s(t)&&n(t,(function(t,n){return!1===t?t:i(e,n)}),!0)}},context:{defaultValue:function(){},message:"should be a string",validate:function(t){return void 0===t||"string"===typeof t}},user:{defaultValue:function(){return{}},message:"should be an object with { id, email, name } properties",validate:function(t){return null===t||t&&n(u(t),(function(t,e){return t&&i(["id","email","name"],e)}),!0)}},metadata:{defaultValue:function(){return{}},message:"should be an object",validate:function(t){return"object"===typeof t&&null!==t}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(t){return!t||t&&n(["debug","info","warn","error"],(function(e,n){return e&&"function"===typeof t[n]}),!0)}},redactedKeys:{defaultValue:function(){return["password"]},message:"should be an array of strings|regexes",validate:function(t){return s(t)&&t.length===r(t,(function(t){return"string"===typeof t||t&&"function"===typeof t.test})).length}},plugins:{defaultValue:function(){return[]},message:"should be an array of plugin objects",validate:function(t){return s(t)&&t.length===r(t,(function(t){return t&&"object"===typeof t&&"function"===typeof t.load})).length}},featureFlags:{defaultValue:function(){return[]},message:'should be an array of objects that have a "name" property',validate:function(t){return s(t)&&t.length===r(t,(function(t){return t&&"object"===typeof t&&"string"===typeof t.name})).length}}};var g=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p=function(t,e){return n(t,(function(t,n,r,i){return t.concat(e(n,r,i))}),[])};function m(){return m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m.apply(this,arguments)}var v=d.schema,y={releaseStage:g({},v.releaseStage,{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"}}),appType:m({},v.appType,{defaultValue:function(){return"browser"}}),logger:g({},v.logger,{defaultValue:function(){return"undefined"!==typeof console&&"function"===typeof console.debug?b():void 0}})},b=function(){var t={},e=console.log;return p(["debug","info","warn","error"],(function(n){var r=console[n];t[n]="function"===typeof r?r.bind(console,"[bugsnag]"):e.bind(console,"[bugsnag]")})),t},_=function(){function t(t,e,n,r){void 0===r&&(r=new Date),this.type=n,this.message=t,this.metadata=e,this.timestamp=r}return t.prototype.toJSON=function(){return{type:this.type,name:this.message,timestamp:this.timestamp,metaData:this.metadata}},t}(),w={};!function(e,n){"use strict";"function"===typeof t&&t.amd?t("stackframe",[],n):"object"===typeof w?w=n():e.StackFrame=n()}(this,(function(){"use strict";function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(t){return t.charAt(0).toUpperCase()+t.substring(1)}function n(t){return function(){return this[t]}}var r=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],s=["fileName","functionName","source"],o=["args"],a=r.concat(i,s,o);function u(t){if(t instanceof Object)for(var n=0;n<a.length;n++)t.hasOwnProperty(a[n])&&void 0!==t[a[n]]&&this["set"+e(a[n])](t[a[n]])}u.prototype={getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(t){if(t instanceof u)this.evalOrigin=t;else{if(!(t instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new u(t)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(t(this.getLineNumber())?":"+this.getLineNumber():"")+(t(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var l=0;l<r.length;l++)u.prototype["get"+e(r[l])]=n(r[l]),u.prototype["set"+e(r[l])]=function(t){return function(e){this[t]=Boolean(e)}}(r[l]);for(var c=0;c<i.length;c++)u.prototype["get"+e(i[c])]=n(i[c]),u.prototype["set"+e(i[c])]=function(e){return function(n){if(!t(n))throw new TypeError(e+" must be a Number");this[e]=Number(n)}}(i[c]);for(var h=0;h<s.length;h++)u.prototype["get"+e(s[h])]=n(s[h]),u.prototype["set"+e(s[h])]=function(t){return function(e){this[t]=String(e)}}(s[h]);return u}));var S={};!function(e,n){"use strict";"function"===typeof t&&t.amd?t("error-stack-parser",["stackframe"],n):"object"===typeof S?S=n(w):e.ErrorStackParser=n(e.StackFrame)}(this,(function(t){"use strict";var e=/(^|@)\S+\:\d+/,n=/^\s*at .*(\S+\:\d+|\(native\))/m,r=/^(eval@)?(\[native code\])?$/;return{parse:function(t){if("undefined"!==typeof t.stacktrace||"undefined"!==typeof t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(n))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(t.replace(/[\(\)]/g,""));return[e[1],e[2]||void 0,e[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter((function(t){return!!t.match(n)}),this).map((function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=e.replace(/^\s+/,"").replace(/\(eval code/g,"("),r=n.match(/ (\((.+):(\d+):(\d+)\)$)/),i=(n=r?n.replace(r[0],""):n).split(/\s+/).slice(1),s=this.extractLocation(r?r[1]:i.pop()),o=i.join(" ")||void 0,a=["eval","<anonymous>"].indexOf(s[0])>-1?void 0:s[0];return new t({functionName:o,fileName:a,lineNumber:s[1],columnNumber:s[2],source:e})}),this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter((function(t){return!t.match(r)}),this).map((function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new t({functionName:e});var n=/((.*".+"[^@]*)?[^@]*)(?:@)/,r=e.match(n),i=r&&r[1]?r[1]:void 0,s=this.extractLocation(e.replace(n,""));return new t({functionName:i,fileName:s[0],lineNumber:s[1],columnNumber:s[2],source:e})}),this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=e.message.split("\n"),i=[],s=2,o=r.length;s<o;s+=2){var a=n.exec(r[s]);a&&i.push(new t({fileName:a[2],lineNumber:a[1],source:r[s]}))}return i},parseOpera10:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=e.stacktrace.split("\n"),i=[],s=0,o=r.length;s<o;s+=2){var a=n.exec(r[s]);a&&i.push(new t({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:r[s]}))}return i},parseOpera11:function(n){return n.stack.split("\n").filter((function(t){return!!t.match(e)&&!t.match(/^Error created at/)}),this).map((function(e){var n,r=e.split("@"),i=this.extractLocation(r.pop()),s=r.shift()||"",o=s.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;s.match(/\(([^\)]*)\)/)&&(n=s.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new t({functionName:o,args:a,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:e})}),this)}}}));var A=S,E=function(t,e,n,r){var i=r&&r.redactedKeys?r.redactedKeys:[],s=r&&r.redactedPaths?r.redactedPaths:[];return JSON.stringify(R(t,i,s),e,n)},O=20,k=25e3,I=8,N="...";function D(t){return t instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(t))}function T(t){return"[Throws: "+(t?t.message:"?")+"]"}function Z(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return!0;return!1}function B(t,e){for(var n=0,r=t.length;n<r;n++)if(0===e.indexOf(t[n]))return!0;return!1}function C(t,e){for(var n=0,r=t.length;n<r;n++){if("string"===typeof t[n]&&t[n].toLowerCase()===e.toLowerCase())return!0;if(t[n]&&"function"===typeof t[n].test&&t[n].test(e))return!0}return!1}function P(t){return"[object Array]"===Object.prototype.toString.call(t)}function x(t,e){try{return t[e]}catch(n){return T(n)}}function R(t,e,n){var r=[],i=0;function s(t,o){function a(){return o.length>I&&i>k}if(i++,o.length>O)return N;if(a())return N;if(null===t||"object"!==typeof t)return t;if(Z(r,t))return"[Circular]";if(r.push(t),"function"===typeof t.toJSON)try{i--;var u=s(t.toJSON(),o);return r.pop(),u}catch(p){return T(p)}if(D(t)){i--;var l=s({name:t.name,message:t.message},o);return r.pop(),l}if(P(t)){for(var c=[],h=0,d=t.length;h<d;h++){if(a()){c.push(N);break}c.push(s(t[h],o.concat("[]")))}return r.pop(),c}var f={};try{for(var g in t)if(Object.prototype.hasOwnProperty.call(t,g))if(B(n,o.join("."))&&C(e,g))f[g]="[REDACTED]";else{if(a()){f[g]=N;break}f[g]=s(x(t,g),o.concat(g))}}catch(m){}return r.pop(),f}return s(t,[])}function j(t,e,n){"string"===typeof e&&(void 0===n?n=null:null!==n&&"string"!==typeof n&&(n=E(n)),t[e]=n)}function q(t,e){if(s(e))for(var n=0;n<e.length;++n){var r=e[n];null!==r&&"object"===typeof r&&j(t,r.name,r.variant)}}function L(t){return p(u(t),(function(e){var n={featureFlag:e};return"string"===typeof t[e]&&(n.variant=t[e]),n}))}var U={add:j,merge:q,toEventApi:L},$=function(t){return!!t&&(!!t.stack||!!t.stacktrace||!!t["opera#sourceloc"])&&"string"===typeof(t.stack||t.stacktrace||t["opera#sourceloc"])&&t.stack!==t.name+": "+t.message};function M(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}var F=M,J=function(t,e,n,r){var i;if(e){var s;if(null===n)return z(t,e);"object"===typeof n&&(s=n),"string"===typeof n&&((i={})[n]=r,s=i),s&&(t[e]||(t[e]={}),t[e]=g({},t[e],s))}},z=function(t,e,n){"string"===typeof e&&(n?t[e]&&delete t[e][n]:delete t[e])},H={add:J,get:function(t,e,n){if("string"===typeof e)return n?t[e]?t[e][n]:void 0:t[e]},clear:z},V={};!function(e,n){"use strict";"function"===typeof t&&t.amd?t("stack-generator",["stackframe"],n):"object"===typeof V?V=n(w):e.StackGenerator=n(e.StackFrame)}(this,(function(t){return{backtrace:function(e){var n=[],r=10;"object"===typeof e&&"number"===typeof e.maxStackSize&&(r=e.maxStackSize);for(var i=arguments.callee;i&&n.length<r&&i.arguments;){for(var s=new Array(i.arguments.length),o=0;o<s.length;++o)s[o]=i.arguments[o];/function(?:\s+([\w$]+))+\s*\(/.test(i.toString())?n.push(new t({functionName:RegExp.$1||void 0,args:s})):n.push(new t({args:s}));try{i=i.caller}catch(a){break}}return n}}}));var G=function(){function t(e,r,i,s,o){void 0===i&&(i=[]),void 0===s&&(s=W()),this.apiKey=void 0,this.context=void 0,this.groupingHash=void 0,this.originalError=o,this._handledState=s,this.severity=this._handledState.severity,this.unhandled=this._handledState.unhandled,this.app={},this.device={},this.request={},this.breadcrumbs=[],this.threads=[],this._metadata={},this._features={},this._user={},this._session=void 0,this.errors=[{errorClass:Y(e),errorMessage:Y(r),type:t.__type,stacktrace:n(i,(function(t,e){var n=X(e);try{return"{}"===JSON.stringify(n)?t:t.concat(n)}catch(r){return t}}),[])}]}var e=t.prototype;return e.addMetadata=function(t,e,n){return H.add(this._metadata,t,e,n)},e.getMetadata=function(t,e){return H.get(this._metadata,t,e)},e.clearMetadata=function(t,e){return H.clear(this._metadata,t,e)},e.addFeatureFlag=function(t,e){void 0===e&&(e=null),U.add(this._features,t,e)},e.addFeatureFlags=function(t){U.merge(this._features,t)},e.clearFeatureFlag=function(t){delete this._features[t]},e.clearFeatureFlags=function(){this._features={}},e.getUser=function(){return this._user},e.setUser=function(t,e,n){this._user={id:t,email:e,name:n}},e.toJSON=function(){return{payloadVersion:"4",exceptions:p(this.errors,(function(t){return g({},t,{message:t.errorMessage})})),severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,request:this.request,breadcrumbs:this.breadcrumbs,context:this.context,groupingHash:this.groupingHash,metaData:this._metadata,user:this._user,session:this._session,featureFlags:U.toEventApi(this._features)}},t}(),X=function(t){var e={file:t.fileName,method:K(t.functionName),lineNumber:t.lineNumber,columnNumber:t.columnNumber,code:void 0,inProject:void 0};return e.lineNumber>-1&&!e.file&&!e.method&&(e.file="global code"),e},K=function(t){return/^global code$/i.test(t)?"global code":t},W=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},Y=function(t){return"string"===typeof t?t:""};G.getStacktrace=function(t,e,n){if($(t))return A.parse(t).slice(e);try{return r(V.backtrace(),(function(t){return-1===(t.functionName||"").indexOf("StackGenerator$$")})).slice(1+n)}catch(i){return[]}},G.create=function(t,e,n,r,i,s){void 0===i&&(i=0);var o,a=tt(t,e,r,s),u=a[0],l=a[1];try{var c=G.getStacktrace(u,l>0?1+l+i:0,1+i);o=new G(u.name,u.message,c,n,t)}catch(h){o=new G(u.name,u.message,[],n,t)}return"InvalidError"===u.name&&o.addMetadata(""+r,"non-error parameter",Q(t)),o};var Q=function(t){return null===t?"null":void 0===t?"undefined":t},tt=function(t,e,n,r){var i,s=0,o=function(t){r&&r.warn(n+' received a non-error: "'+t+'"');var e=new Error(n+' received a non-error. See "'+n+'" tab for more detail.');return e.name="InvalidError",e};if(e)switch(typeof t){case"string":case"number":case"boolean":i=new Error(String(t)),s+=1;break;case"function":i=o("function"),s+=2;break;case"object":null!==t&&F(t)?i=t:null!==t&&et(t)?((i=new Error(t.message||t.errorMessage)).name=t.name||t.errorClass,s+=1):(i=o(null===t?"null":"unsupported object"),s+=2);break;default:i=o("nothing"),s+=2}else F(t)?i=t:(i=o(typeof t),s+=2);if(!$(i))try{throw i}catch(a){$(a)&&(i=a,s=1)}return[i,s]};G.__type="browserjs";var et=function(t){return("string"===typeof t.name||"string"===typeof t.errorClass)&&("string"===typeof t.message||"string"===typeof t.errorMessage)},nt=G,rt=function(t,e,n){var r=0,i=function(){if(r>=t.length)return n(null,!0);e(t[r],(function(t,e){return t?n(t):!1===e?n(null,!1):(r++,void i())}))};i()},it=function(t,e,n,r){var i=function(t,r){if("function"!==typeof t)return r(null);try{if(2!==t.length){var i=t(e);return i&&"function"===typeof i.then?i.then((function(t){return setTimeout((function(){return r(null,t)}))}),(function(t){setTimeout((function(){return n(t),r(null,!0)}))})):r(null,i)}t(e,(function(t,e){if(t)return n(t),r(null);r(null,e)}))}catch(s){n(s),r(null)}};rt(t,i,r)},st=function(t,e,n,r){for(var i=!1,s=t.slice();!i&&s.length;)try{i=!1===s.pop()(e)}catch(o){r.error("Error occurred in "+n+" callback, continuing anyway\u2026"),r.error(o)}return i},ot=function(t,e){var n="000000000"+t;return n.substr(n.length-e)},at="object"===typeof window?window:self,ut=0;for(var lt in at)Object.hasOwnProperty.call(at,lt)&&ut++;var ct=("undefined"!==typeof navigator?navigator:{userAgent:""}).mimeTypes?("undefined"!==typeof navigator?navigator:{userAgent:""}).mimeTypes.length:0,ht=ot((ct+("undefined"!==typeof navigator?navigator:{userAgent:""}).userAgent.length).toString(36)+ut.toString(36),4),dt=function(){return ht},ft=0,gt=4,pt=36,mt=Math.pow(pt,gt);function vt(){return ot((Math.random()*mt<<0).toString(pt),gt)}function yt(){return ft=ft<mt?ft:0,++ft-1}function bt(){return"c"+(new Date).getTime().toString(pt)+ot(yt().toString(pt),gt)+dt()+(vt()+vt())}bt.fingerprint=dt;var _t=bt,wt=function(){function t(){this.id=_t(),this.startedAt=new Date,this._handled=0,this._unhandled=0,this._user={},this.app={},this.device={}}var e=t.prototype;return e.getUser=function(){return this._user},e.setUser=function(t,e,n){this._user={id:t,email:e,name:n}},e.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},e._track=function(t){this[t._handledState.unhandled?"_unhandled":"_handled"]+=1},t}(),St=wt,At=function(){},Et=function(){function t(e,n,r,i){var s=this;void 0===n&&(n=d.schema),void 0===r&&(r=[]),this._notifier=i,this._config={},this._schema=n,this._delivery={sendSession:At,sendEvent:At},this._logger={debug:At,info:At,warn:At,error:At},this._plugins={},this._breadcrumbs=[],this._session=null,this._metadata={},this._features={},this._context=void 0,this._user={},this._cbs={e:[],s:[],sp:[],b:[]},this.Client=t,this.Event=nt,this.Breadcrumb=_,this.Session=St,this._config=this._configure(e,r),p(r.concat(this._config.plugins),(function(t){t&&s._loadPlugin(t)})),this._depth=1;var o=this,a=this.notify;this.notify=function(){return a.apply(o,arguments)}}var s=t.prototype;return s.addMetadata=function(t,e,n){return H.add(this._metadata,t,e,n)},s.getMetadata=function(t,e){return H.get(this._metadata,t,e)},s.clearMetadata=function(t,e){return H.clear(this._metadata,t,e)},s.addFeatureFlag=function(t,e){void 0===e&&(e=null),U.add(this._features,t,e)},s.addFeatureFlags=function(t){U.merge(this._features,t)},s.clearFeatureFlag=function(t){delete this._features[t]},s.clearFeatureFlags=function(){this._features={}},s.getContext=function(){return this._context},s.setContext=function(t){this._context=t},s._configure=function(t,e){var r=n(e,(function(t,e){return e&&e.configSchema?g({},t,e.configSchema):t}),this._schema),i=n(u(r),(function(e,n){var i=r[n].defaultValue(t[n]);return void 0!==t[n]?r[n].validate(t[n])?r[n].allowPartialObject?e.config[n]=g(i,t[n]):e.config[n]=t[n]:(e.errors[n]=r[n].message,e.config[n]=i):e.config[n]=i,e}),{errors:{},config:{}}),s=i.errors,o=i.config;if(r.apiKey){if(!o.apiKey)throw new Error("No Bugsnag API Key set");/^[0-9a-f]{32}$/i.test(o.apiKey)||(s.apiKey="should be a string of 32 hexadecimal characters")}return this._metadata=g({},o.metadata),U.merge(this._features,o.featureFlags),this._user=g({},o.user),this._context=o.context,o.logger&&(this._logger=o.logger),o.onError&&(this._cbs.e=this._cbs.e.concat(o.onError)),o.onBreadcrumb&&(this._cbs.b=this._cbs.b.concat(o.onBreadcrumb)),o.onSession&&(this._cbs.s=this._cbs.s.concat(o.onSession)),u(s).length&&this._logger.warn(Ot(s,t)),o},s.getUser=function(){return this._user},s.setUser=function(t,e,n){this._user={id:t,email:e,name:n}},s._loadPlugin=function(t){var e=t.load(this);return t.name&&(this._plugins["~"+t.name+"~"]=e),this},s.getPlugin=function(t){return this._plugins["~"+t+"~"]},s._setDelivery=function(t){this._delivery=t(this)},s.startSession=function(){var t=new St;return t.app.releaseStage=this._config.releaseStage,t.app.version=this._config.appVersion,t.app.type=this._config.appType,t._user=g({},this._user),st(this._cbs.s,t,"onSession",this._logger)?(this._logger.debug("Session not started due to onSession callback"),this):this._sessionDelegate.startSession(this,t)},s.addOnError=function(t,e){void 0===e&&(e=!1),this._cbs.e[e?"unshift":"push"](t)},s.removeOnError=function(t){this._cbs.e=r(this._cbs.e,(function(e){return e!==t}))},s._addOnSessionPayload=function(t){this._cbs.sp.push(t)},s.addOnSession=function(t){this._cbs.s.push(t)},s.removeOnSession=function(t){this._cbs.s=r(this._cbs.s,(function(e){return e!==t}))},s.addOnBreadcrumb=function(t,e){void 0===e&&(e=!1),this._cbs.b[e?"unshift":"push"](t)},s.removeOnBreadcrumb=function(t){this._cbs.b=r(this._cbs.b,(function(e){return e!==t}))},s.pauseSession=function(){return this._sessionDelegate.pauseSession(this)},s.resumeSession=function(){return this._sessionDelegate.resumeSession(this)},s.leaveBreadcrumb=function(t,n,r){if(t="string"===typeof t?t:"",r="string"===typeof r&&i(e,r)?r:"manual",n="object"===typeof n&&null!==n?n:{},t){var s=new _(t,n,r);st(this._cbs.b,s,"onBreadcrumb",this._logger)?this._logger.debug("Breadcrumb not attached due to onBreadcrumb callback"):(this._breadcrumbs.push(s),this._breadcrumbs.length>this._config.maxBreadcrumbs&&(this._breadcrumbs=this._breadcrumbs.slice(this._breadcrumbs.length-this._config.maxBreadcrumbs)))}},s._isBreadcrumbTypeEnabled=function(t){var e=this._config.enabledBreadcrumbTypes;return null===e||i(e,t)},s.notify=function(t,e,n){void 0===n&&(n=At);var r=nt.create(t,!0,void 0,"notify()",this._depth+1,this._logger);this._notify(r,e,n)},s._notify=function(e,n,r){var s=this;if(void 0===r&&(r=At),e.app=g({},e.app,{releaseStage:this._config.releaseStage,version:this._config.appVersion,type:this._config.appType}),e.context=e.context||this._context,e._metadata=g({},e._metadata,this._metadata),e._features=g({},e._features,this._features),e._user=g({},e._user,this._user),e.breadcrumbs=this._breadcrumbs.slice(),null!==this._config.enabledReleaseStages&&!i(this._config.enabledReleaseStages,this._config.releaseStage))return this._logger.warn("Event not sent due to releaseStage/enabledReleaseStages configuration"),r(null,e);var o=e.severity,a=function(t){s._logger.error("Error occurred in onError callback, continuing anyway\u2026"),s._logger.error(t)},u=[].concat(this._cbs.e).concat(n);it(u,e,a,(function(n,i){if(n&&a(n),!i)return s._logger.debug("Event not sent due to onError callback"),r(null,e);s._isBreadcrumbTypeEnabled("error")&&t.prototype.leaveBreadcrumb.call(s,e.errors[0].errorClass,{errorClass:e.errors[0].errorClass,errorMessage:e.errors[0].errorMessage,severity:e.severity},"error"),o!==e.severity&&(e._handledState.severityReason={type:"userCallbackSetSeverity"}),e.unhandled!==e._handledState.unhandled&&(e._handledState.severityReason.unhandledOverridden=!0,e._handledState.unhandled=e.unhandled),s._session&&(s._session._track(e),e._session=s._session),s._delivery.sendEvent({apiKey:e.apiKey||s._config.apiKey,notifier:s._notifier,events:[e]},(function(t){return r(t,e)}))}))},t}(),Ot=function(t,e){return new Error("Invalid configuration\n"+p(u(t),(function(n){return"  - "+n+" "+t[n]+", got "+kt(e[n])})).join("\n\n"))},kt=function(t){switch(typeof t){case"string":case"number":case"object":return JSON.stringify(t);default:return String(t)}},It=Et,Nt={},Dt=["events.[].metaData","events.[].breadcrumbs.[].metaData","events.[].request"];Nt.event=function(t,e){var n=E(t,null,null,{redactedPaths:Dt,redactedKeys:e});if(n.length>1e6&&(t.events[0]._metadata={notifier:"WARNING!\nSerialized payload was "+n.length/1e6+"MB (limit = 1MB)\nmetadata was removed"},(n=E(t,null,null,{redactedPaths:Dt,redactedKeys:e})).length>1e6))throw new Error("payload exceeded 1MB limit");return n},Nt.session=function(t,e){var n=E(t,null,null);if(n.length>1e6)throw new Error("payload exceeded 1MB limit");return n};var Tt={};Tt=function(t,e){return void 0===e&&(e=window),{sendEvent:function(n,r){void 0===r&&(r=function(){});var i=Zt(t._config,"notify","4",e),s=new e.XDomainRequest;s.onload=function(){r(null)},s.open("POST",i),setTimeout((function(){try{s.send(Nt.event(n,t._config.redactedKeys))}catch(e){t._logger.error(e),r(e)}}),0)},sendSession:function(n,r){void 0===r&&(r=function(){});var i=Zt(t._config,"sessions","1",e),s=new e.XDomainRequest;s.onload=function(){r(null)},s.open("POST",i),setTimeout((function(){try{s.send(Nt.session(n,t._config.redactedKeys))}catch(e){t._logger.error(e),r(e)}}),0)}}};var Zt=function(t,e,n,r){var i=JSON.parse(JSON.stringify(new Date));return Bt(t.endpoints[e],r.location.protocol)+"?apiKey="+encodeURIComponent(t.apiKey)+"&payloadVersion="+n+"&sentAt="+encodeURIComponent(i)},Bt=Tt._matchPageProtocol=function(t,e){return"http:"===e?t.replace(/^https:/,"http:"):t},Ct=function(t,e){return void 0===e&&(e=window),{sendEvent:function(n,r){void 0===r&&(r=function(){});try{var i=t._config.endpoints.notify,s=new e.XMLHttpRequest;s.onreadystatechange=function(){s.readyState===e.XMLHttpRequest.DONE&&r(null)},s.open("POST",i),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("Bugsnag-Api-Key",n.apiKey||t._config.apiKey),s.setRequestHeader("Bugsnag-Payload-Version","4"),s.setRequestHeader("Bugsnag-Sent-At",(new Date).toISOString()),s.send(Nt.event(n,t._config.redactedKeys))}catch(o){t._logger.error(o)}},sendSession:function(n,r){void 0===r&&(r=function(){});try{var i=t._config.endpoints.sessions,s=new e.XMLHttpRequest;s.onreadystatechange=function(){s.readyState===e.XMLHttpRequest.DONE&&r(null)},s.open("POST",i),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("Bugsnag-Api-Key",t._config.apiKey),s.setRequestHeader("Bugsnag-Payload-Version","1"),s.setRequestHeader("Bugsnag-Sent-At",(new Date).toISOString()),s.send(Nt.session(n,t._config.redactedKeys))}catch(o){t._logger.error(o)}}}},Pt=new Date,xt=function(){Pt=new Date},Rt={name:"appDuration",load:function(t){return t.addOnError((function(t){var e=new Date;t.app.duration=e-Pt}),!0),{reset:xt}}},jt=function(t){return void 0===t&&(t=window),{load:function(e){e.addOnError((function(e){void 0===e.context&&(e.context=t.location.pathname)}),!0)}}},qt=function(t,e){var n="000000000"+t;return n.substr(n.length-e)},Lt="object"===typeof window?window:self,Ut=0;for(var $t in Lt)Object.hasOwnProperty.call(Lt,$t)&&Ut++;var Mt=("undefined"!==typeof navigator?navigator:{userAgent:""}).mimeTypes?("undefined"!==typeof navigator?navigator:{userAgent:""}).mimeTypes.length:0,Ft=qt((Mt+("undefined"!==typeof navigator?navigator:{userAgent:""}).userAgent.length).toString(36)+Ut.toString(36),4),Jt=function(){return Ft},zt=0,Ht=4,Vt=36,Gt=Math.pow(Vt,Ht);function Xt(){return qt((Math.random()*Gt<<0).toString(Vt),Ht)}function Kt(){return zt=zt<Gt?zt:0,++zt-1}function Wt(){return"c"+(new Date).getTime().toString(Vt)+qt(Kt().toString(Vt),Ht)+Jt()+(Xt()+Xt())}Wt.fingerprint=Jt;var Yt=Wt,Qt="bugsnag-anonymous-id",te=function(){try{var t=window.localStorage,e=t.getItem(Qt);return e&&/^c[a-z0-9]{20,32}$/.test(e)||(e=Yt(),t.setItem(Qt,e)),e}catch(n){}},ee=function(t,e){return void 0===t&&(t="undefined"!==typeof navigator?navigator:{userAgent:""}),void 0===e&&(e=window.screen),{load:function(n){var r={locale:t.browserLanguage||t.systemLanguage||t.userLanguage||t.language,userAgent:t.userAgent};e&&e.orientation&&e.orientation.type?r.orientation=e.orientation.type:r.orientation=document.documentElement.clientWidth>document.documentElement.clientHeight?"landscape":"portrait",n._config.generateAnonymousId&&(r.id=te()),n.addOnSession((function(t){t.device=g({},t.device,r),n._config.collectUserIp||ne(t)})),n.addOnError((function(t){t.device=g({},t.device,r,{time:new Date}),n._config.collectUserIp||ne(t)}),!0)},configSchema:{generateAnonymousId:{validate:function(t){return!0===t||!1===t},defaultValue:function(){return!0},message:"should be true|false"}}}},ne=function(t){var e=t.getUser();e&&e.id||t.setUser(t.device.id)},re=function(t){return void 0===t&&(t=window),{load:function(e){e.addOnError((function(e){e.request&&e.request.url||(e.request=g({},e.request,{url:t.location.href}))}),!0)}}},ie={load:function(t){t._sessionDelegate=se}},se={startSession:function(t,e){var n=t;return n._session=e,n._pausedSession=null,null===n._config.enabledReleaseStages||i(n._config.enabledReleaseStages,n._config.releaseStage)?(n._delivery.sendSession({notifier:n._notifier,device:e.device,app:e.app,sessions:[{id:e.id,startedAt:e.startedAt,user:e._user}]}),n):(n._logger.warn("Session not sent due to releaseStage/enabledReleaseStages configuration"),n)},resumeSession:function(t){return t._session?t:t._pausedSession?(t._session=t._pausedSession,t._pausedSession=null,t):t.startSession()},pauseSession:function(t){t._pausedSession=t._session,t._session=null}},oe={load:function(t){t._config.collectUserIp||t.addOnError((function(t){t._user&&"undefined"===typeof t._user.id&&delete t._user.id,t._user=g({id:"[REDACTED]"},t._user),t.request=g({clientIp:"[REDACTED]"},t.request)}))},configSchema:{collectUserIp:{defaultValue:function(){return!0},message:"should be true|false",validate:function(t){return!0===t||!1===t}}}},ae={load:function(t){!/^(local-)?dev(elopment)?$/.test(t._config.releaseStage)&&t._isBreadcrumbTypeEnabled("log")&&p(ue,(function(e){var r=console[e];console[e]=function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];t.leaveBreadcrumb("Console output",n(s,(function(t,e,n){var r="[Unknown value]";try{r=String(e)}catch(i){}if("[object Object]"===r)try{r=JSON.stringify(e)}catch(i){}return t["["+n+"]"]=r,t}),{severity:0===e.indexOf("group")?"log":e}),"log"),r.apply(console,s)},console[e]._restore=function(){console[e]=r}}))}},ue=r(["log","debug","info","warn","error"],(function(t){return"undefined"!==typeof console&&"function"===typeof console[t]})),le=200,ce=5e5,he=function(t,e){return void 0===t&&(t=document),void 0===e&&(e=window),{load:function(i){if(i._config.trackInlineScripts){var s=e.location.href,o="",a=t.attachEvent?"complete"===t.readyState:"loading"!==t.readyState,u=function(){return t.documentElement.outerHTML};o=u();var l=t.onreadystatechange;t.onreadystatechange=function(){"interactive"===t.readyState&&(o=u(),a=!0);try{l.apply(this,arguments)}catch(e){}};var c=null,h=function(t){c=t},d=function(){var e=t.currentScript||c;if(!e&&!a){var n=t.scripts||t.getElementsByTagName("script");e=n[n.length-1]}return e},f=function(t){a&&o||(o=u());var e=["\x3c!-- DOC START --\x3e"].concat(o.split("\n")),r=t-1,i=Math.max(r-3,0),s=Math.min(r+3,e.length);return n(e.slice(i,s),(function(t,e,n){return t[i+1+n]=e.length<=le?e:e.substr(0,le),t}),{})};i.addOnError((function(t){t.errors[0].stacktrace=r(t.errors[0].stacktrace,(function(t){return!/__trace__$/.test(t.method)}));var e=t.errors[0].stacktrace[0];if(!e||!e.file||e.file.replace(/#.*$/,"")===s.replace(/#.*$/,"")){var n=d();if(n){var i=n.innerHTML;t.addMetadata("script","content",i.length<=ce?i:i.substr(0,ce)),e&&e.lineNumber&&(e.code=f(e.lineNumber))}}}),!0);var g=p(["setTimeout","setInterval","setImmediate","requestAnimationFrame"],(function(t){return de(e,t,(function(t){return m(t,(function(t){return{get:function(){return t[0]},replace:function(e){t[0]=e}}}))}))}))[0];p(["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],(function(t){e[t]&&e[t].prototype&&Object.prototype.hasOwnProperty.call(e[t].prototype,"addEventListener")&&(de(e[t].prototype,"addEventListener",(function(t){return m(t,fe)})),de(e[t].prototype,"removeEventListener",(function(t){return m(t,fe,!0)})))}))}function m(t,e,n){return void 0===n&&(n=!1),function(){var r=[].slice.call(arguments);try{var i=e(r),s=i.get();if(n&&t.apply(this,r),"function"!==typeof s)return t.apply(this,r);if(s.__trace__)i.replace(s.__trace__);else{var o=d();s.__trace__=function(){h(o),g((function(){h(null)}),0);var t=s.apply(this,arguments);return h(null),t},s.__trace__.__trace__=s.__trace__,i.replace(s.__trace__)}}catch(a){}if(t.apply)return t.apply(this,r);switch(r.length){case 1:return t(r[0]);case 2:return t(r[0],r[1]);default:return t()}}}},configSchema:{trackInlineScripts:{validate:function(t){return!0===t||!1===t},defaultValue:function(){return!0},message:"should be true|false"}}}};function de(t,e,n){var r=t[e];if(!r)return r;var i=n(r);return t[e]=i,r}function fe(t){var e=!!t[1]&&"function"===typeof t[1].handleEvent;return{get:function(){return e?t[1].handleEvent:t[1]},replace:function(n){e?t[1].handleEvent=n:t[1]=n}}}var ge=function(t){return void 0===t&&(t=window),{load:function(e){"addEventListener"in t&&e._isBreadcrumbTypeEnabled("user")&&t.addEventListener("click",(function(n){var r,i;try{r=pe(n.target),i=me(n.target,t)}catch(s){r="[hidden]",i="[hidden]",e._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/yy3rn63z")}e.leaveBreadcrumb("UI click",{targetText:r,targetSelector:i},"user")}),!0)}}},pe=function(t){var e=t.textContent||t.innerText||"";return e||"submit"!==t.type&&"button"!==t.type||(e=t.value),ve(e=e.replace(/^\s+|\s+$/g,""),140)};function me(t,e){var n=[t.tagName];if(t.id&&n.push("#"+t.id),t.className&&t.className.length&&n.push("."+t.className.split(" ").join(".")),!e.document.querySelectorAll||!Array.prototype.indexOf)return n.join("");try{if(1===e.document.querySelectorAll(n.join("")).length)return n.join("")}catch(i){return n.join("")}if(t.parentNode.childNodes.length>1){var r=Array.prototype.indexOf.call(t.parentNode.childNodes,t)+1;n.push(":nth-child("+r+")")}return 1===e.document.querySelectorAll(n.join("")).length?n.join(""):t.parentNode?me(t.parentNode,e)+" > "+n.join(""):n.join("")}function ve(t,e){var n="(...)";return t&&t.length<=e?t:t.slice(0,e-n.length)+n}var ye={};ye=function(t){void 0===t&&(t=window);var e={load:function(e){if("addEventListener"in t&&e._isBreadcrumbTypeEnabled("navigation")){var n=function(t){return function(){return e.leaveBreadcrumb(t,{},"navigation")}};t.addEventListener("pagehide",n("Page hidden"),!0),t.addEventListener("pageshow",n("Page shown"),!0),t.addEventListener("load",n("Page loaded"),!0),t.document.addEventListener("DOMContentLoaded",n("DOMContentLoaded"),!0),t.addEventListener("load",(function(){return t.addEventListener("popstate",n("Navigated back"),!0)})),t.addEventListener("hashchange",(function(n){var r=n.oldURL?{from:be(n.oldURL,t),to:be(n.newURL,t),state:Se(t)}:{to:be(t.location.href,t)};e.leaveBreadcrumb("Hash changed",r,"navigation")}),!0),t.history.replaceState&&we(e,t.history,"replaceState",t),t.history.pushState&&we(e,t.history,"pushState",t)}}};return e};var be=function(t,e){var n=e.document.createElement("A");return n.href=t,""+n.pathname+n.search+n.hash},_e=function(t,e,n,r){var i=be(t.location.href,t);return{title:n,state:e,prevState:Se(t),to:r||i,from:i}},we=function(t,e,n,r){var i=e[n];e[n]=function(s,o,a){t.leaveBreadcrumb("History "+n,_e(r,s,o,a),"navigation"),"function"===typeof t.resetEventCount&&t.resetEventCount(),t._config.autoTrackSessions&&t.startSession(),i.apply(e,[s,o].concat(void 0!==a?a:[]))}},Se=function(t){try{return t.history.state}catch(e){}},Ae="request",Ee="BS~~S",Oe="BS~~U",ke="BS~~M",Ie=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=window);var n={load:function(n){if(n._isBreadcrumbTypeEnabled("request")){var r=[n._config.endpoints.notify,n._config.endpoints.sessions].concat(t);a(),c();var s=function(t,e,r){var i={status:t.status,request:e+" "+r};t.status>=400?n.leaveBreadcrumb("fetch() failed",i,Ae):n.leaveBreadcrumb("fetch() succeeded",i,Ae)},o=function(t,e){n.leaveBreadcrumb("fetch() error",{request:t+" "+e},Ae)}}function a(){if("addEventListener"in e.XMLHttpRequest.prototype){var t=e.XMLHttpRequest.prototype.open;e.XMLHttpRequest.prototype.open=function(e,n){this[Oe]=n,this[ke]=e,this[Ee]&&(this.removeEventListener("load",u),this.removeEventListener("error",l)),this.addEventListener("load",u),this.addEventListener("error",l),this[Ee]=!0,t.apply(this,arguments)}}}function u(){var t=this[Oe];if(void 0!==t){if("string"!==typeof t||!i(r,t.replace(/\?.*$/,""))){var e={status:this.status,request:this[ke]+" "+this[Oe]};this.status>=400?n.leaveBreadcrumb("XMLHttpRequest failed",e,Ae):n.leaveBreadcrumb("XMLHttpRequest succeeded",e,Ae)}}else n._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.")}function l(){var t=this[Oe];void 0!==t?"string"===typeof t&&i(r,t.replace(/\?.*$/,""))||n.leaveBreadcrumb("XMLHttpRequest error",{request:this[ke]+" "+this[Oe]},Ae):n._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.")}function c(){if("fetch"in e&&!e.fetch.polyfill){var t=e.fetch;e.fetch=function(){var e,n=arguments,r=arguments[0],i=arguments[1],a=null;return r&&"object"===typeof r?(a=r.url,i&&"method"in i?e=i.method:r&&"method"in r&&(e=r.method)):(a=r,i&&"method"in i&&(e=i.method)),void 0===e&&(e="GET"),new Promise((function(r,i){t.apply(void 0,n).then((function(t){s(t,e,a),r(t)})).catch((function(t){o(e,a),i(t)}))}))}}}}};return n},Ne={load:function(t){var e=0;t.addOnError((function(n){if(e>=t._config.maxEvents)return!1;e++})),t.resetEventCount=function(){e=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer \u2264100",validate:function(t){return l(1,100)(t)}}}},De={},Te=(De={load:function(t){t.addOnError((function(t){var e=n(t.errors,(function(t,e){return t.concat(e.stacktrace)}),[]);p(e,(function(t){t.file=Te(t.file)}))}))}})._strip=function(t){return"string"===typeof t?t.replace(/\?.*$/,"").replace(/#.*$/,""):t},Ze=function(t){return void 0===t&&(t=window),{load:function(e){if(e._config.autoDetectErrors&&e._config.enabledErrorTypes.unhandledExceptions){var n=t.onerror;t.onerror=r}function r(t,r,i,s,o){if(0===i&&/Script error\.?/.test(t))e._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/yy3rn63z");else{var a,u={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}};if(o)a=e.Event.create(o,!0,u,"window onerror",1),Be(a.errors[0].stacktrace,r,i,s);else if("object"!==typeof t||null===t||r&&"string"===typeof r||i||s||o)a=e.Event.create(t,!0,u,"window onerror",1),Be(a.errors[0].stacktrace,r,i,s);else{var l=t.type?"Event: "+t.type:"Error",c=t.message||t.detail||"";(a=e.Event.create({name:l,message:c},!0,u,"window onerror",1)).originalError=t,a.addMetadata("window onerror",{event:t,extraParameters:r})}e._notify(a)}"function"===typeof n&&n.apply(this,arguments)}}}},Be=function(t,e,n,r){t[0]||t.push({});var i=t[0];i.file||"string"!==typeof e||(i.file=e),!i.lineNumber&&Ce(n)&&(i.lineNumber=n),i.columnNumber||(Ce(r)?i.columnNumber=r:window.event&&Ce(window.event.errorCharacter)&&(i.columnNumber=window.event.errorCharacter))},Ce=function(t){return"number"===typeof t&&"NaN"!==String.call(t)},Pe=function(t){return void 0===t&&(t=window),{load:function(e){if(e._config.autoDetectErrors&&e._config.enabledErrorTypes.unhandledRejections){var n=function(t){var n=t.reason,r=!1;try{t.detail&&t.detail.reason&&(n=t.detail.reason,r=!0)}catch(s){}var i=e.Event.create(n,!1,{severity:"error",unhandled:!0,severityReason:{type:"unhandledPromiseRejection"}},"unhandledrejection handler",1,e._logger);r&&p(i.errors[0].stacktrace,xe(n)),e._notify(i,(function(t){var e;F(t.originalError)&&!t.originalError.stack&&t.addMetadata("unhandledRejection handler",((e={})[Object.prototype.toString.call(t.originalError)]={name:t.originalError.name,message:t.originalError.message,code:t.originalError.code},e))}))};"addEventListener"in t?t.addEventListener("unhandledrejection",n):t.onunhandledrejection=function(t,e){n({detail:{reason:t,promise:e}})}}}}},xe=function(t){return function(e){e.file!==t.toString()&&e.method&&(e.method=e.method.replace(/^\s+/,""))}},Re={},je="Bugsnag JavaScript",qe="7.16.1",Le="https://github.com/bugsnag/bugsnag-js",Ue=g({},d.schema,y),$e={_client:null,createClient:function(t){"string"===typeof t&&(t={apiKey:t}),t||(t={});var e=[Rt,ee(),jt(),re(),Ne,ie,oe,De,Ze(),Pe(),ye(),ge(),Ie(),ae,he()],n=new It(t,Ue,e,{name:je,version:qe,url:Le});return n._setDelivery(window.XDomainRequest?Tt:Ct),n._logger.debug("Loaded!"),n.leaveBreadcrumb("Bugsnag loaded",{},"state"),n._config.autoTrackSessions?n.startSession():n},start:function(t){return $e._client?($e._client._logger.warn("Bugsnag.start() was called more than once. Ignoring."),$e._client):($e._client=$e.createClient(t),$e._client)}};return p(["resetEventCount"].concat(u(It.prototype)),(function(t){/^_/.test(t)||($e[t]=function(){if(!$e._client)return console.log("Bugsnag."+t+"() was called before Bugsnag.start()");$e._client._depth+=1;var e=$e._client[t].apply($e._client,arguments);return $e._client._depth-=1,e})})),(Re=$e).Client=It,Re.Event=nt,Re.Session=St,Re.Breadcrumb=_,Re.default=$e,Re}()},64061:function(t,e,n){t.exports=n(97748)},25172:function(){!function(t,e,n,r,i,s,o,a,u,l){if(!t[r]||!t[r]._q){for(;a<o.length;)i(s,o[a++]);(u=e.createElement(n)).async=1,u.src="https://cdn.branch.io/branch-latest.min.js",(l=e.getElementsByTagName(n)[0]).parentNode.insertBefore(u,l),t[r]=s}}(window,document,"script","branch",(function(t,e){t[e]=function(){t._q.push([e,arguments])}}),{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent logEvent disableTracking".split(" "),0)},52367:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});const r={pn:function(t){const e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}};var i=r;var s={nt:()=>{const t=t=>{const e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e};return t()+t(!0)+t(!0)+t()}};class o{constructor(t,e){this.td="undefined"==typeof window?self:window,this.ed=t,this.nd=e}od(){if("indexedDB"in this.td)return this.td.indexedDB}rd(){try{if(null==this.od())return!1;if(this.od().open("Braze IndexedDB Support Test"),"undefined"!=typeof window){const t=window.chrome||window.browser||window.msBrowser;if(t&&t.runtime&&t.runtime.id)return this.nd.info("Not using IndexedDB for storage because we are running inside an extension"),!1}return!0}catch(t){return this.nd.info("Not using IndexedDB for storage due to following error: "+t),!1}}dd(t,e){const n=this.od().open(this.ed.sd,this.ed.VERSION);if(null==n)return"function"==typeof e&&e(),!1;const r=this;return n.onupgradeneeded=t=>{r.nd.info("Upgrading indexedDB "+r.ed.sd+" to v"+r.ed.VERSION+"...");const e=t.target.result;for(const n in r.ed.$t)r.ed.$t.hasOwnProperty(n)&&!e.objectStoreNames.contains(r.ed.$t[n])&&e.createObjectStore(r.ed.$t[n])},n.onsuccess=n=>{const i=n.target.result;i.onversionchange=()=>{i.close(),"function"==typeof e&&e(),r.nd.error("Needed to close the database unexpectedly because of an upgrade in another tab")},t(i)},n.onerror=t=>(r.nd.info("Could not open indexedDB "+r.ed.sd+" v"+r.ed.VERSION+": "+t.target.errorCode),"function"==typeof e&&e(),!0),!0}setItem(t,e,n,r,i){if(!this.rd())return"function"==typeof i&&i(),!1;const s=this;return this.dd((o=>{if(!o.objectStoreNames.contains(t))return s.nd.error("Could not store object "+e+" in "+t+" on indexedDB "+s.ed.sd+" - "+t+" is not a valid objectStore"),void("function"==typeof i&&i());const a=o.transaction([t],"readwrite").objectStore(t).put(n,e);a.onerror=()=>{s.nd.error("Could not store object "+e+" in "+t+" on indexedDB "+s.ed.sd),"function"==typeof i&&i()},a.onsuccess=()=>{"function"==typeof r&&r()}}),i)}getItem(t,e,n){if(!this.rd())return!1;const r=this;return this.dd((i=>{if(!i.objectStoreNames.contains(t))return void r.nd.error("Could not retrieve object "+e+" in "+t+" on indexedDB "+r.ed.sd+" - "+t+" is not a valid objectStore");const s=i.transaction([t],"readonly").objectStore(t).get(e);s.onerror=()=>{r.nd.error("Could not retrieve object "+e+" in "+t+" on indexedDB "+r.ed.sd)},s.onsuccess=t=>{const e=t.target.result;null!=e&&n(e)}}))}hr(t,e,n){if(!this.rd())return"function"==typeof n&&n(),!1;const r=this;return this.dd((i=>{if(!i.objectStoreNames.contains(t))return r.nd.error("Could not retrieve last record from "+t+" on indexedDB "+r.ed.sd+" - "+t+" is not a valid objectStore"),void("function"==typeof n&&n());const s=i.transaction([t],"readonly").objectStore(t).openCursor(null,"prev");s.onerror=()=>{r.nd.error("Could not open cursor for "+t+" on indexedDB "+r.ed.sd),"function"==typeof n&&n()},s.onsuccess=t=>{const r=t.target.result;null!=r&&null!=r.value&&null!=r.key?e(r.key,r.value):"function"==typeof n&&n()}}),n)}br(t,e){if(!this.rd())return!1;const n=this;return this.dd((r=>{r.objectStoreNames.contains(t)?r.transaction([t],"readwrite").objectStore(t).delete(e).onerror=()=>{n.nd.error("Could not delete record "+e+" from "+t+" on indexedDB "+n.ed.sd)}:n.nd.error("Could not delete record "+e+" from "+t+" on indexedDB "+n.ed.sd+" - "+t+" is not a valid objectStore")}))}Jt(t,e){if(!this.rd())return!1;const n=this;return this.dd((r=>{if(!r.objectStoreNames.contains(t))return void n.nd.error("Could not retrieve objects from "+t+" on indexedDB "+n.ed.sd+" - "+t+" is not a valid objectStore");const i=r.transaction([t],"readwrite").objectStore(t),s=i.openCursor(),o=[];s.onerror=()=>{o.length>0?(n.nd.info("Cursor closed midway through for "+t+" on indexedDB "+n.ed.sd),e(o)):n.nd.error("Could not open cursor for "+t+" on indexedDB "+n.ed.sd)},s.onsuccess=t=>{const n=t.target.result;null!=n?(null!=n.value&&null!=n.key&&(i.delete(n.key).onsuccess=()=>{o.push(n.value)}),n.continue()):o.length>0&&e(o)}}))}clearData(){if(!this.rd())return!1;const t=[];for(const n in this.ed.$t)this.ed.$t.hasOwnProperty(n)&&this.ed.$t[n]!==this.ed.$t.oe&&t.push(this.ed.$t[n]);const e=this;return this.dd((function(n){const r=n.transaction(t,"readwrite");for(let i=0;i<t.length;i++){const n=t[i];r.objectStore(n).clear().onerror=function(){e.nd.error("Could not clear "+this.source.name+" on indexedDB "+e.ed.sd)}}r.onerror=function(){e.nd.error("Could not clear object stores on indexedDB "+e.ed.sd)}}))}}o.ep={Ft:{sd:"AppboyServiceWorkerAsyncStorage",VERSION:6,$t:{jl:"data",jr:"pushClicks",pu:"pushSubscribed",ud:"fallbackDevice",Mt:"cardUpdates",oe:"optOut",$r:"pendingData",Kn:"sdkAuthenticationSignature"},se:1}};const a={init:function(t){void 0===t&&void 0!==a.zg||(a.zg=!!t),a.Dg||(a.Dg=!0)},destroy:function(){a.Dg=!1,a.zg=void 0,a.nd=void 0},setLogger:function(t){"function"==typeof t?(a.init(),a.nd=t):a.info("Ignoring setLogger call since logger is not a function")},toggleLogging:function(){a.init(),a.zg?(console.log("Disabling Braze logging"),a.zg=!1):(console.log("Enabled Braze logging"),a.zg=!0)},info:function(t){if(a.zg){const e="Braze: "+t;null!=a.nd?a.nd(e):console.log(e)}},warn:function(t){if(a.zg){const e="Braze SDK Warning: "+t+" (v4.2.1)";null!=a.nd?a.nd(e):console.warn(e)}},error:function(t){if(a.zg){const e="Braze SDK Error: "+t+" (v4.2.1)";null!=a.nd?a.nd(e):console.error(e)}}};var u=a;var l={bn:i,A:{CustomEvent:"ce",Pr:"p",Sl:"pc",oc:"ca",Ra:"i",qs:"ie",T:"cci",W:"ccic",_:"ccc",L:"ccd",Wh:"ss",bh:"se",Je:"si",Re:"sc",He:"sbc",Pe:"sfe",ro:"iec",vl:"lr",yl:"uae",U:"ci",F:"cc",Al:"lcaa",$l:"lcar",En:"inc",An:"add",Un:"rem",Sn:"set",Cl:"sgu"},qr:{Fr:"feed_displayed",ac:"content_cards_displayed"},it:s,qt:o,xt:o.ep,D:u,zo:{Rn:"allowCrawlerActivity",Wn:"baseUrl",Vn:"noCookies",Yn:"devicePropertyAllowlist",ta:"disablePushTokenMaintenance",Xn:"enableLogging",Zn:"enableSdkAuthentication",ia:"manageServiceWorkerExternally",ho:"minimumIntervalBetweenTriggerActionsInSeconds",po:"sessionTimeoutInSeconds",Eo:"appVersion",na:"serviceWorkerLocation",ra:"safariWebsitePushId",jn:"localization",ao:"contentSecurityNonce",_o:"enableHtmlInAppMessages",Io:"allowUserSuppliedJavascript",no:"inAppMessageZIndex",lo:"openInAppMessagesInNewTab",en:"openNewsFeedCardsInNewTab",Ui:"requireExplicitInAppMessageDismissal",Ao:"doNotLoadFontAwesome",So:"sdkFlavor",tn:"openCardsInNewTab"}}},74556:function(t,e){"use strict";const n={Ir:()=>"serviceWorker"in("undefined"!==typeof navigator?navigator:{userAgent:""})&&"undefined"!=typeof ServiceWorkerRegistration&&"showNotification"in ServiceWorkerRegistration.prototype&&"PushManager"in window,Cr:()=>"safari"in window&&"pushNotification"in window.safari&&"function"==typeof window.safari.pushNotification.permission&&"function"==typeof window.safari.pushNotification.requestPermission,isPushSupported:()=>n.Ir()||n.Cr(),isPushBlocked:()=>{const t=n.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"denied"===window.Notification.permission,e=n.isPushSupported()&&(!("Notification"in window)||null==window.Notification);return t||e},isPushPermissionGranted:()=>n.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"granted"===window.Notification.permission,Xe:()=>!n.isPushBlocked()&&n.isPushSupported()&&!n.isPushPermissionGranted()};e.Z=n},17615:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(72893),i=n(52367),s=n(2979),o=n(3905);class a{constructor(t,e){this.v=t,this.si=e}getUserId(t){null==t&&i.Z.D.error("getUserId must be supplied with a callback. e.g., braze.getUser().getUserId(function(userId) {console.log('the user id is ' + userId)})"),"function"==typeof t&&t(this.v.getUserId())}addAlias(t,e){return!(0,o.ro)(t,"add alias","the alias",!1)||t.length<=0?(i.Z.D.error("addAlias requires a non-empty alias"),!1):!(0,o.ro)(e,"add alias","the label",!1)||e.length<=0?(i.Z.D.error("addAlias requires a non-empty label"),!1):this.si.Nn(t,e).S}setFirstName(t){return!!(0,o.ro)(t,"set first name","the firstName",!0)&&this.v.nu("first_name",t)}setLastName(t){return!!(0,o.ro)(t,"set last name","the lastName",!0)&&this.v.nu("last_name",t)}setEmail(t){return null===t||(0,o.vV)(t)?this.v.nu("email",t):(i.Z.D.error(`Cannot set email address - "${t}" did not pass RFC-5322 validation.`),!1)}setGender(t){return"string"==typeof t&&(t=t.toLowerCase()),!(null!==t&&!(0,r.fk)(a.Genders,t,`Gender "${t}" is not a valid gender.`,"User.Genders"))&&this.v.nu("gender",t)}setDateOfBirth(t,e,n){return null===t&&null===e&&null===n?this.v.nu("dob",null):(t=parseInt(t),e=parseInt(e),n=parseInt(n),isNaN(t)||isNaN(e)||isNaN(n)||e>12||e<1||n>31||n<1?(i.Z.D.error("Cannot set date of birth - parameters should comprise a valid date e.g. setDateOfBirth(1776, 7, 4);"),!1):this.v.nu("dob",`${t}-${e}-${n}`))}setCountry(t){return!!(0,o.ro)(t,"set country","the country",!0)&&this.v.nu("country",t)}setHomeCity(t){return!!(0,o.ro)(t,"set home city","the homeCity",!0)&&this.v.nu("home_city",t)}setLanguage(t){return!!(0,o.ro)(t,"set language","the language",!0)&&this.v.nu("language",t)}setEmailNotificationSubscriptionType(t){return!!(0,r.fk)(a.NotificationSubscriptionTypes,t,`Email notification setting "${t}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.v.nu("email_subscribe",t)}setPushNotificationSubscriptionType(t){return!!(0,r.fk)(a.NotificationSubscriptionTypes,t,`Push notification setting "${t}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.v.nu("push_subscribe",t)}setPhoneNumber(t){return!!(0,o.ro)(t,"set phone number","the phoneNumber",!0)&&(null===t||t.match(a.Cn)?this.v.nu("phone",t):(i.Z.D.error(`Cannot set phone number - "${t}" did not pass validation.`),!1))}setLastKnownLocation(t,e,n,r,s){return null==t||null==e?(i.Z.D.error("Cannot set last-known location - latitude and longitude are required."),!1):(t=parseFloat(t),e=parseFloat(e),null!=n&&(n=parseFloat(n)),null!=r&&(r=parseFloat(r)),null!=s&&(s=parseFloat(s)),isNaN(t)||isNaN(e)||null!=n&&isNaN(n)||null!=r&&isNaN(r)||null!=s&&isNaN(s)?(i.Z.D.error("Cannot set last-known location - all supplied parameters must be numeric."),!1):t>90||t<-90||e>180||e<-180?(i.Z.D.error("Cannot set last-known location - latitude and longitude are bounded by \xb190 and \xb1180 respectively."),!1):null!=n&&n<0||null!=s&&s<0?(i.Z.D.error("Cannot set last-known location - accuracy and altitudeAccuracy may not be negative."),!1):this.si.setLastKnownLocation(this.v.getUserId(),t,e,r,n,s).S)}setCustomUserAttribute(t,e){if(!(0,o.zM)(t,"set custom user attribute","the given key"))return!1;const n=typeof e,a=(0,r.J_)(e),u=(0,r.kJ)(e);if("number"!==n&&"boolean"!==n&&!a&&!u&&null!==e&&!(0,o.zM)(e,`set custom user attribute "${t}"`,"the given value"))return!1;if(a&&(e=(0,s.BT)(e)),u){for(let n=0;n<e.length;n++){const r=e[n];if(!(0,o.zM)(r,`set custom user attribute "${t}"`,"the element in the given array"))return!1}return this.si.In(i.Z.A.Sn,t,e).S}return this.v.setCustomUserAttribute(t,e)}addToCustomAttributeArray(t,e){return!!(0,o.zM)(t,"add to custom user attribute array","the given key")&&!(null!=e&&!(0,o.zM)(e,"add to custom user attribute array","the given value"))&&this.si.In(i.Z.A.An,t,e).S}removeFromCustomAttributeArray(t,e){return!!(0,o.zM)(t,"remove from custom user attribute array","the given key")&&!(null!=e&&!(0,o.zM)(e,"remove from custom user attribute array","the given value"))&&this.si.In(i.Z.A.Un,t,e).S}incrementCustomUserAttribute(t,e){if(!(0,o.zM)(t,"increment custom user attribute","the given key"))return!1;null==e&&(e=1);const n=parseInt(e);return isNaN(n)||n!==parseFloat(e)?(i.Z.D.error(`Cannot increment custom user attribute because the given incrementValue "${e}" is not an integer.`),!1):this.si.In(i.Z.A.En,t,n).S}setCustomLocationAttribute(t,e,n){return!!(0,o.zM)(t,"set custom location attribute","the given key")&&((null!==e||null!==n)&&(e=parseFloat(e),n=parseFloat(n),isNaN(e)||e>90||e<-90||isNaN(n)||n>180||n<-180)?(i.Z.D.error("Received invalid values for latitude and/or longitude. Latitude and longitude are bounded by \xb190 and \xb1180 respectively, or must both be null for removal."),!1):this.si.Fn(t,e,n).S)}addToSubscriptionGroup(t){return!(0,o.ro)(t,"add user to subscription group","subscription group ID",!1)||t.length<=0?(i.Z.D.error("addToSubscriptionGroup requires a non-empty subscription group ID"),!1):this.si.Tn(t,a.kn.SUBSCRIBED).S}removeFromSubscriptionGroup(t){return!(0,o.ro)(t,"remove user from subscription group","subscription group ID",!1)||t.length<=0?(i.Z.D.error("removeFromSubscriptionGroup requires a non-empty subscription group ID"),!1):this.si.Tn(t,a.kn.UNSUBSCRIBED).S}Gr(t,e,n,r,i){this.v.Gr(t,e,n,r,i),this.si.$n()}Jr(t){this.v.Jr(t)}}a.Cn=/^[0-9 .\\(\\)\\+\\-]+$/,a.Genders={MALE:"m",FEMALE:"f",OTHER:"o",UNKNOWN:"u",NOT_APPLICABLE:"n",PREFER_NOT_TO_SAY:"p"},a.NotificationSubscriptionTypes={OPTED_IN:"opted_in",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},a.kn={SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},a._n="user_id",a.lu="custom",a.ee=997},40158:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});class r{constructor(){}Rs(){}changeUser(t){}clearData(){}}},39179:function(t,e,n){"use strict";var r=n(52367),i=n(57801),s=n(57559),o=n(24673);const a={G:(t,e,n)=>{const a=new o.Z,u=i.ZP.g();if(!u)return r.Z.D.info(`Not logging event with type "${t}" because the current session ID could not be found.`),a;const l=u.mo();return a.ve.push(new s.Z(n||i.ZP.p().getUserId(),t,(new Date).valueOf(),l,e)),a.S=i.ZP.l().bo(a.ve),a}};e.Z=a},57801:function(t,e,n){"use strict";n.d(e,{JY:function(){return x},ZP:function(){return j}});var r=n(45966),i=n(74663),s=n(52367);class o{constructor(t,e,n){this.h=t,this.xn=e||!1,this.zn=n,this.qn=new i.Z,this.Bn=0,this.Dn=1}Gn(){return this.xn}Hn(){return this.h.I(r.I.q.Jn)}setSdkAuthenticationSignature(t){const e=this.Hn();this.h.B(r.I.q.Jn,t);const n=s.Z.xt.Ft;new s.Z.qt(n,s.Z.D).setItem(n.$t.Kn,this.Dn,t),e!==t&&this.Qs()}Ln(){this.h.Xs(r.I.q.Jn);const t=s.Z.xt.Ft;new s.Z.qt(t,s.Z.D).br(t.$t.Kn,this.Dn)}subscribeToSdkAuthenticationFailures(t){return this.zn.ut(t)}Mn(t){this.zn.St(t)}On(){this.qn.removeAllSubscriptions()}Pn(){this.Bn+=1}Qn(){return this.Bn}Qs(){this.Bn=0}}var a=n(40158),u=n(64365),l={BROWSER:"browser",BROWSER_VERSION:"browserVersion",OS:"os",RESOLUTION:"resolution",LANGUAGE:"language",TIME_ZONE:"timeZone",USER_AGENT:"userAgent"};class c{constructor(t){this.id=t}li(){const t={};return null!=this[l.BROWSER]&&(t.browser=this[l.BROWSER]),null!=this[l.BROWSER_VERSION]&&(t.browser_version=this[l.BROWSER_VERSION]),null!=this[l.OS]&&(t.os_version=this[l.OS]),null!=this[l.RESOLUTION]&&(t.resolution=this[l.RESOLUTION]),null!=this[l.LANGUAGE]&&(t.locale=this[l.LANGUAGE]),null!=this[l.TIME_ZONE]&&(t.time_zone=this[l.TIME_ZONE]),null!=this[l.USER_AGENT]&&(t.user_agent=this[l.USER_AGENT]),t}}var h=n(42308),d=n(72893);class f{constructor(t,e){this.h=t,null==e&&(e=(0,d.VO)(l)),this.xo=e}te(){let t=this.h.tu(r.I.iu.Go);null==t&&(t=new h.Z(s.Z.it.nt()),this.h.ru(r.I.iu.Go,t));const e=new c(t.eu);for(let n=0;n<this.xo.length;n++){const t=this.xo[n];switch(t){case l.BROWSER:e[t]=u.Z.browser;break;case l.BROWSER_VERSION:e[t]=u.Z.version;break;case l.OS:e[t]=this.Fo();break;case l.RESOLUTION:e[t]=screen.width+"x"+screen.height;break;case l.LANGUAGE:e[t]=u.Z.language;break;case l.TIME_ZONE:e[t]=this.Jo(new Date);break;case l.USER_AGENT:e[t]=u.Z.userAgent}}return e}Fo(){if(u.Z.qo())return u.Z.qo();const t=this.h.I(r.I.q.Ho);return t&&t.os_version?t.os_version:u.Z.Ko()}Jo(t){if("undefined"!=typeof Intl&&"function"==typeof Intl.DateTimeFormat)try{if("function"==typeof Intl.DateTimeFormat().resolvedOptions){const t=Intl.DateTimeFormat().resolvedOptions().timeZone;if(null!=t&&""!==t)return t}}catch(t){s.Z.D.info("Intl.DateTimeFormat threw an error, probably https://bugs.chromium.org/p/chromium/issues/detail?id=811403, falling back to GTM offset: "+t.message)}const e=t.getTimezoneOffset();return this.Qo(e)}Qo(t){const e=parseInt(t/60),n=parseInt(t%60);let r="GMT";return 0!==t&&(r+=t<0?"+":"-",r+=("00"+Math.abs(e)).slice(-2)+":"+("00"+Math.abs(n)).slice(-2)),r}}var g=n(63826),p=n(57559),m=n(2979),v=n(39179);class y{constructor(t,e,n,r,i,s,o,a,u,l,c){this.Qi=t,this.h=e,this.Bo=n,this.v=r,this.j=i,this.gt=s,this.Ji=o,this.yo=a,this.Po=u,this.Uo=l,this.Xo=c,this.$o=["npm"]}Ps(t,e){const n=this.Qi.te(),i=n.li(),s=this.h.I(r.I.q.Ho);(0,d.Xy)(s,i)||(t.device=i),t.api_key=this.Ji,t.time=(0,m.FX)((new Date).valueOf(),!0);const o=this.h.I(r.I.q.Yo)||[],a=this.h.I(r.I.q.Zo)||"";if(this.$o.length>0&&(!(0,d.Xy)(o,this.$o)||a!==this.j.Vo())&&(t.sdk_metadata=this.$o),t.sdk_version=this.Po,this.Uo&&(t.sdk_flavor=this.Uo),t.app_version=this.Xo,t.device_id=n.id,e){const e=this.v.getUserId();null!=e&&(t.user_id=e)}return t}Os(t,e,n){const r=e.auth_error,i=e.error;if(!r&&!i)return!0;if(r){let e;this.Bo.Pn();const i={errorCode:r.error_code};for(const t of n)(0,d.kJ)(t)&&"X-Braze-Auth-Signature"===t[0]&&(i.signature=t[1]);t.respond_with&&t.respond_with.user_id?i.userId=t.respond_with.user_id:t.user_id&&(i.userId=t.user_id);const o=r.reason;return o?(i.reason=o,e=`due to ${o}`):e=`with error code ${r.error_code}.`,this.Bo.Gn()||(e+=' Please use the "enableSdkAuthentication" initialization option to enable authentication.'),s.Z.D.error(`SDK Authentication failed ${e}`),this.sa(t.events,t.attributes),this.Bo.Mn(i),!1}if(i){let n=i;switch(n){case g.Z.oa:const r="Received successful response with empty body.";return v.Z.G(s.Z.A.qs,{e:r}),s.Z.D.info(r),!1;case g.Z.ha:const i="Received successful response with invalid JSON";return v.Z.G(s.Z.A.qs,{e:i+": "+e.response}),s.Z.D.info(i),!1;case g.Z.ua:n=`The API key "${t.api_key}" is invalid for the baseUrl ${this.yo}`;break;case g.Z.ca:n="Sorry, we are not currently accepting your requests. If you think this is in error, please contact us.";break;case g.Z.la:n="No device identifier. Please contact support@braze.com"}s.Z.D.error("Backend error: "+n)}return!1}fa(t,e,n,r){return!!(t&&0!==t.length||e&&0!==e.length||n||r)}ma(t,e,n,r){const i=[],s=t=>t||"",o=s(this.v.getUserId());let a,u,l,c,h=this.ni(t,e);if(n.length>0){const t=[];for(const e of n){if(a=e.li(),this.Bo.Gn()){if(o&&!a.user_id){c||(c={},c.events=[]),c.events.push(a);continue}if(s(a.user_id)!==o){u||(u=[]),u.push(a);continue}}t.push(a)}t.length>0&&(h.events=t)}if(r.length>0){const t=[];for(const e of r)this.Bo.Gn()&&s(e.user_id)!==o?(l||(l=[]),l.push(e)):t.push(e);t.length>0&&(h.attributes=t)}if(this.sa(u,l),h=this.Ps(h,!0),c){c=this.Ps(c,!1);const t={requestData:c,headers:this.Bs(c)};i.push(t)}if(h&&!this.fa(h.events,h.attributes,t,e))return c?i:null;const d={requestData:h,headers:this.Bs(h)};return i.push(d),i}sa(t,e){if(t){const e=[];for(const n of t){const t=p.Z.fromJson(n);t.time=(0,m.Pn)(t.time),e.push(t)}this.h.bo(e)}if(e)for(const n of e)this.h.pa(n)}Vs(t,e){let n="HTTP error ";null!=t&&(n+=t+" "),n+=e,s.Z.D.error(n)}yr(t){return v.Z.G(s.Z.A.Ra,{n:t})}ni(t,e,n){const r={};t&&(r.feed=!0),e&&(r.triggers=!0);const i=null!=n?n:this.v.getUserId();return i&&(r.user_id=i),r.config={config_time:this.gt.Zs()},{respond_with:r}}Bs(t,e,n){const i=[["X-Braze-Api-Key",this.Ji]];let s=!1;if(null!=t.respond_with&&t.respond_with.triggers&&(i.push(["X-Braze-TriggersRequest","true"]),s=!0),null!=t.respond_with&&t.respond_with.feed&&(i.push(["X-Braze-FeedRequest","true"]),s=!0),e){i.push(["X-Braze-ContentCardsRequest","true"]);let t=this.h.I(r.I.q.As);t&&n||(t=0,this.h.B(r.I.q.As,t)),i.push(["BRAZE-SYNC-RETRY-COUNT",t.toString()]),s=!0}if(s&&i.push(["X-Braze-DataRequest","true"]),this.Bo.Gn()){const t=this.Bo.Hn();null!=t&&i.push(["X-Braze-Auth-Signature",t])}return i}Gs(t,e){const n=t.device;n&&n.os_version instanceof Promise?n.os_version.then((n=>{t.device.os_version=n,e()})):e()}Qs(){this.Bo.Qs()}Ks(){return this.yo}addSdkMetadata(t){for(const e of t)-1===this.$o.indexOf(e)&&this.$o.push(e)}}var b=n(41843),_=n(96504),w=n(24673),S=n(74556);class A{constructor(t,e,n,r,s,o,a,u,l,c){this.Ji=t,this.yo=e,this.sl=0,this.il=a.Ba(),this.hl=null,this.j=n,this.Qi=r,this.v=s,this.gt=o,this.h=a,this.Bo=l,this.vt=c,this.ol=u,this.rl=new i.Z,this.ul=50}al(t,e){return!t&&!e&&this.Bo.Qn()>=this.ul}cl(t){let e=this.j.Eh();if(t.length>0){const n=this.v.getUserId();for(const r of t){const t=!r.userId&&!n||r.userId===n;r.type===s.Z.A.Wh&&t&&(e=!0)}}return e}ml(t,e,n,i,o,a,u){null==n&&(n=!0),n&&this.dl();const l=this.h.Ca(),c=this.h.Ua();let h=!1;const d=(t,e)=>{let s=!1;b.Z.Hs({url:this.yo+"/data/",data:t,headers:e,S:n=>{null!=t.respond_with&&t.respond_with.triggers&&(this.sl=Math.max(this.sl-1,0)),this.vt.Os(t,n,e)?(this.Bo.Qs(),this.gt.lh(n),null!=t.respond_with&&t.respond_with.user_id!=this.v.getUserId()||(null!=t.device&&this.h.B(r.I.q.Ho,t.device),null!=t.sdk_metadata&&(this.h.B(r.I.q.Yo,t.sdk_metadata),this.h.B(r.I.q.Zo,this.j.Vo())),this.ol(n),"function"==typeof i&&i())):n.auth_error&&(s=!0)},error:()=>{null!=t.respond_with&&t.respond_with.triggers&&(this.sl=Math.max(this.sl-1,0)),this.vt.sa(t.events,t.attributes),"function"==typeof o&&o()},fl:t=>{if("function"==typeof a&&a(t),n&&!h){if(t&&!s)this.gl();else{let t=this.hl;(null==t||t<1e3*this.il)&&(t=1e3*this.il),this.gl(Math.min(3e5,(0,_.R)(1e3*this.il,3*t)))}h=!0}}})},f=this.cl(l),g=e||f;if(this.al(u,f))return void s.Z.D.info("Declining to flush data due to 50 consecutive authentication failures");if(n&&!this.vt.fa(l,c,t,g))return this.gl(),void("function"==typeof a&&a(!0));const p=this.vt.ma(t,g,l,c);g&&this.sl++;let m=!1;if(p)for(const r of p)this.vt.Gs(r.requestData,(()=>d(r.requestData,r.headers))),m=!0;this.Bo.Gn()&&n&&!m?this.gl():f&&(s.Z.D.info("Invoking new session subscriptions"),this.rl.St())}bl(){return this.sl>0}gl(t){this.kl||(null==t&&(t=1e3*this.il),this.dl(),this.wl=setTimeout((()=>{if(document.hidden){const t="visibilitychange",e=()=>{document.hidden||(document.removeEventListener(t,e,!1),this.ml())};document.addEventListener(t,e,!1)}else this.ml()}),t),this.hl=t)}dl(){null!=this.wl&&(clearTimeout(this.wl),this.wl=null)}initialize(){this.kl=!1,this.gl()}destroy(){this.rl.removeAllSubscriptions(),this.Bo.On(),this.dl(),this.kl=!0,this.ml(null,null,!1),this.wl=null}cr(t){return this.rl.ut(t)}openSession(){const t=this.j.Vo()!==this.j.mo();t&&(this.h.va(r.I.iu.Go),this.h.va(r.I.iu.su)),this.ml(null,!1,null,null,null),this.$n(),t&&n.e(761).then(n.bind(n,80761)).then((t=>{if(this.kl)return;const e=t.default.aa();if(null!=e&&(S.Z.isPushPermissionGranted()||S.Z.isPushBlocked())){const t=()=>{e.Er()?s.Z.D.info("Push token maintenance is disabled, not refreshing token for backend."):e.subscribe()},n=(e,n)=>{n&&t()},i=()=>{const e=this.h.I(r.I.q.gn);(null==e||e)&&t()},o=s.Z.xt.Ft;new s.Z.qt(o,s.Z.D).hr(o.$t.pu,n,i)}}))}changeUser(t,e,n){const i=this.v.getUserId();if(i!==t){this.j.kh(),null!=i&&this.ml(null,!1,null,null,null),this.v.uu(t),n?this.Bo.setSdkAuthenticationSignature(n):this.Bo.Ln();for(let t=0;t<e.length;t++)e[t].changeUser(null==i);null!=i&&this.h.Xs(r.I.q.P),this.h.Xs(r.I.q.Ho),this.openSession(),s.Z.D.info('Changed user to "'+t+'".')}else{let e="Doing nothing.";n&&this.Bo.Hn()!==n&&(this.Bo.setSdkAuthenticationSignature(n),e="Updated SDK authentication signature"),s.Z.D.info(`Current user is already ${t}. ${e}`)}}requestImmediateDataFlush(t){this.dl(),this.j.mo(),this.ml(null,null,null,null,null,t,!0)}requestFeedRefresh(){this.j.mo(),this.ml(!0)}zr(t,e){this.j.mo(),s.Z.D.info("Requesting explicit trigger refresh."),this.ml(null,!0,null,t,e)}Nn(t,e){const n=s.Z.A.yl,r={a:t,l:e},i=v.Z.G(n,r);return i&&s.Z.D.info(`Logged alias ${t} with label ${e}`),i}In(t,e,n){if(this.gt.hu(e))return s.Z.D.info(`Custom Attribute "${e}" is blocklisted, ignoring.`),new w.Z;const r={key:e,value:n},i=v.Z.G(t,r);return i&&s.Z.D.info(`Logged custom attribute: ${e} with value: ${n}`),i}setLastKnownLocation(t,e,n,r,i,o){const a={latitude:e,longitude:n};null!=r&&(a.altitude=r),null!=i&&(a.ll_accuracy=i),null!=o&&(a.alt_accuracy=o);const u=v.Z.G(s.Z.A.vl,a,t);return u&&s.Z.D.info(`Set user last known location as ${JSON.stringify(a,null,2)}`),u}kr(t,e){const n=this.j.mo();return new p.Z(this.v.getUserId(),s.Z.A.Sl,t,n,{cid:e})}$n(){const t=s.Z.xt.Ft;new s.Z.qt(t,s.Z.D).setItem(t.$t.jl,1,{baseUrl:this.yo,data:{api_key:this.Ji,device_id:this.Qi.te().id},userId:this.v.getUserId(),sdkAuthEnabled:this.Bo.Gn()})}wr(t){for(const e of t)if(e.api_key===this.Ji)this.vt.sa(e.events,e.attributes);else{const t=s.Z.xt.Ft;new s.Z.qt(t,s.Z.D).setItem(t.$t.$r,s.Z.it.nt(),e)}}Fn(t,e,n){if(this.gt.hu(t))return s.Z.D.info(`Custom Attribute "${t}" is blocklisted, ignoring.`),new w.Z;let r,i;return null===e&&null===n?(r=s.Z.A.$l,i={key:t}):(r=s.Z.A.Al,i={key:t,latitude:e,longitude:n}),v.Z.G(r,i)}Tn(t,e){const n={group_id:t,status:e};return v.Z.G(s.Z.A.Cl,n)}}class E{constructor(t,e,n,r,i,s,o){this.hh=t||0,this.gh=e||[],this.mh=n||[],this.fh=r||[],this.ph=i,null!=i&&""!==i||(this.ph=null),this.oh=s||null,this.uh=o||{}}ss(){return{s:"4.2.1",l:this.hh,e:this.gh,a:this.mh,p:this.fh,m:this.ph,v:this.oh,c:this.uh}}static yn(t){let e=t.l;return"4.2.1"!==t.s&&(e=0),new E(e,t.e,t.a,t.p,t.m,t.v,t.c)}}class O{constructor(t){this.h=t,this.sh=new i.Z,this.eh=new i.Z,this.ih=null}rh(){if(null==this.ih){const t=this.h.I(r.I.q.nh);this.ih=null!=t?E.yn(t):new E}return this.ih}Zs(){return this.rh().hh}lh(t){if(null!=t&&null!=t.config){const e=t.config;if(e.time>this.rh().hh){const t=new E(e.time,e.events_blacklist,e.attributes_blacklist,e.purchases_blacklist,e.messaging_session_timeout,e.vapid_public_key,e.content_cards);let n=!1;null!=t.oh&&this.fn()!==t.oh&&(n=!0);let i=!1;null!=t.uh.enabled&&this.Ys()!==t.uh.enabled&&(i=!0),this.ih=t,this.h.B(r.I.q.nh,t.ss()),n&&this.sh.St(),i&&this.eh.St()}}}dn(t){let e=this.sh.ut(t);return this.ah&&this.sh.removeSubscription(this.ah),this.ah=e,e}Ms(t){return this.eh.ut(t)}ge(t){return-1!==this.rh().gh.indexOf(t)}hu(t){return-1!==this.rh().mh.indexOf(t)}Dr(t){return-1!==this.rh().fh.indexOf(t)}dh(){return this.rh().ph}fn(){return this.rh().oh}Ys(){return this.rh().uh.enabled||!1}}class k{constructor(t,e,n,r){this.h=t,this.v=e,this.gt=n,this.wh=1e3,r=parseFloat(r),isNaN(r)&&(r=1800),r<this.wh/1e3&&(s.Z.D.info("Specified session timeout of "+r+"s is too small, using the minimum session timeout of "+this.wh/1e3+"s instead."),r=this.wh/1e3),this.Sh=r}jh(t,e){return new p.Z(this.v.getUserId(),s.Z.A.bh,t,e.eu,{d:(0,m.FX)(t-e.xh)})}Vo(){const t=this.h.tu(r.I.iu.Dh);return null==t?null:t.eu}Eh(){const t=(new Date).valueOf(),e=this.gt.dh(),n=this.h.I(r.I.q.Ch);if(null!=n&&null==e)return!1;const i=null==n||t-n>1e3*e;return i&&this.h.B(r.I.q.Ch,t),i}Gh(t,e){return null==e||!(t-e.xh<this.wh)&&e.Nh<t}mo(){const t=(new Date).valueOf(),e=t+1e3*this.Sh,n=this.h.tu(r.I.iu.Dh);if(this.Gh(t,n)){let i="Generating session start event with time "+t;if(null!=n){let t=n._h;t-n.xh<this.wh&&(t=n.xh+this.Fh),this.h.Hh(this.jh(t,n)),i+=" (old session ended "+t+")"}i+=". Will expire "+e.valueOf(),s.Z.D.info(i);const o=new h.Z(s.Z.it.nt(),e);return this.h.Hh(new p.Z(this.v.getUserId(),s.Z.A.Wh,t,o.eu)),this.h.ru(r.I.iu.Dh,o),null==this.h.I(r.I.q.Ch)&&this.h.B(r.I.q.Ch,t),o.eu}return n._h=t,n.Nh=e,this.h.ru(r.I.iu.Dh,n),n.eu}kh(){const t=this.h.tu(r.I.iu.Dh);null!=t&&(this.h.qh(r.I.iu.Dh),this.h.Hh(this.jh((new Date).valueOf(),t)))}}const I={jo:(t,e)=>{let n=!1;try{if(localStorage&&localStorage.getItem)try{localStorage.setItem(r.I.q.ga,!0),localStorage.getItem(r.I.q.ga)&&(localStorage.removeItem(r.I.q.ga),n=!0)}catch(t){if("QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||!(localStorage.length>0))throw t;n=!0}}catch(t){s.Z.D.info("Local Storage not supported!")}const i=I.Sa(),o=new r.Z.Ea(t,i&&!e,n);let a=null;return a=n?new r.Z.wa(t):new r.Z._a,new r.Z(o,a)},Sa:()=>("undefined"!==typeof navigator?navigator:{userAgent:""}).cookieEnabled||"cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1)};var N=I,D=n(95280),T=n(8548),Z=n(63552),B=n(17615);class C{constructor(t,e){this.gt=t,this.h=e}getUserId(){const t=this.h.tu(r.I.iu.su);if(null==t)return null;let e=t.eu,n=(0,T.E)(e);if(n>B.Z.ee){for(;n>B.Z.ee;)e=e.slice(0,e.length-1),n=(0,T.E)(e);t.eu=e,this.h.ru(r.I.iu.su,t)}return e}uu(t){const e=null==this.getUserId();this.h.ru(r.I.iu.su,new h.Z(t)),e&&this.h.ou(t)}setCustomUserAttribute(t,e){if(this.gt.hu(t))return s.Z.D.info('Custom Attribute "'+t+'" is blocklisted, ignoring.'),!1;const n={};return n[t]=e,this.nu(B.Z.lu,n,!0)}nu(t,e,n,r){const i=this.h.mu(this.getUserId(),t,e);return!r&&i&&s.Z.D.info(`Logged${n?" custom":""} attribute ${t} with value ${e}`),i}Gr(t,e,n,i,o){this.nu("push_token",t,!1,!0),this.nu("custom_push_public_key",n,!1,!0),this.nu("custom_push_user_auth",i,!1,!0),this.nu("custom_push_vapid_public_key",o,!1,!0);const a=s.Z.xt.Ft,u=new s.Z.qt(a,s.Z.D),l=new Z.Z(t,e,n,i,o);this.h.B(r.I.q.gn,l.ss()),u.setItem(a.$t.pu,a.se,!0)}Jr(t){if(this.nu("push_token",null,!1,!0),this.nu("custom_push_public_key",null,!1,!0),this.nu("custom_push_user_auth",null,!1,!0),this.nu("custom_push_vapid_public_key",null,!1,!0),t){const t=s.Z.xt.Ft,e=new s.Z.qt(t,s.Z.D);this.h.B(r.I.q.gn,!1),e.setItem(t.$t.pu,t.se,!1)}}}var P=n(75319);const x={Rn:"allowCrawlerActivity",Wn:"baseUrl",Vn:"noCookies",Yn:"devicePropertyAllowlist",ta:"disablePushTokenMaintenance",Xn:"enableLogging",Zn:"enableSdkAuthentication",ia:"manageServiceWorkerExternally",ho:"minimumIntervalBetweenTriggerActionsInSeconds",po:"sessionTimeoutInSeconds",Eo:"appVersion",na:"serviceWorkerLocation",ra:"safariWebsitePushId",jn:"localization",ao:"contentSecurityNonce",_o:"enableHtmlInAppMessages",Io:"allowUserSuppliedJavascript",no:"inAppMessageZIndex",lo:"openInAppMessagesInNewTab",tn:"openCardsInNewTab",en:"openNewsFeedCardsInNewTab",Ui:"requireExplicitInAppMessageDismissal",Ao:"doNotLoadFontAwesome",So:"sdkFlavor"};class R{constructor(){this.No=!1,this.wo=!1,this.To=new i.Z,this.Oo=new i.Z,this.vo={},this.Co=[],this.Lo=[],this.De=[],this.Po="4.2.1"}Ro(t){this.To.ut(t)}Bi(t){this.Oo.ut(t)}initialize(t,e){if(this.Mo())return s.Z.D.info("Braze has already been initialized with an API key."),!0;this.vo=e||{};let n=this.nn(x.Xn);const a=function(t){null==t&&(t="");const e=t.split("?").slice(1).join("?"),n={};if(null!=e){const t=e.split("&");for(let e=0;e<t.length;e++){const r=t[e].split("=");""!==r[0]&&(n[r[0]]=r[1])}}return n}(P.SD.hn());if(a&&"true"===a.brazeLogging&&(n=!0),s.Z.D.init(n),s.Z.D.info(`Initialization Options: ${JSON.stringify(this.vo,null,2)}`),null==t||""===t||"string"!=typeof t)return s.Z.D.error("Braze requires a valid API key to be initialized."),!1;this.Ji=t;let c=this.nn(x.Wn);if(null==c||""===c||"string"!=typeof c)return s.Z.D.error("Braze requires a valid baseUrl to be initialized."),!1;if(c=c.replace(/(\.[a-z]+)[^\.]*$/i,"$1/api/v3"),0!==c.indexOf("http")&&(c="https://"+c),this.yo=c,u.Z.Do&&!this.nn(x.Rn))return s.Z.D.info("Ignoring activity from crawler bot "+("undefined"!==typeof navigator?navigator:{userAgent:""}).userAgent),this.wo=!0,!1;const h=this.nn(R.Vn)||!1;if(this.h=N.jo(t,h),new r.Z.ne(null,!0).lr(r.I.ae))return s.Z.D.info("Ignoring all activity due to previous opt out"),this.wo=!0,!1;for(const r of(0,d.XP)(this.vo))-1===(0,d.VO)(s.Z.zo).indexOf(r)&&s.Z.D.warn(`Ignoring unknown initialization option '${r}'.`);const g=["mparticle","wordpress","tealium"];if(null!=this.nn(x.So)){const t=this.nn(x.So);-1!==g.indexOf(t)?this.Uo=t:s.Z.D.error("Invalid sdk flavor passed: "+t)}let p=this.nn(s.Z.zo.Yn);if(null!=p)if((0,d.kJ)(p)){const t=[];for(let e=0;e<p.length;e++)(0,d.fk)(l,p[e],"devicePropertyAllowlist contained an invalid value.","DeviceProperties")&&t.push(p[e]);p=t}else s.Z.D.error("devicePropertyAllowlist must be an array. Defaulting to all properties."),p=null;this.Qi=new f(this.h,p),this.gt=new O(this.h),this.v=new C(this.gt,this.h),this.j=new k(this.h,this.v,this.gt,this.nn(x.po));const m=new i.Z;return this.Bo=new o(this.h,this.nn(x.Zn),m),this.jt(m),this.vt=new y(this.Qi,this.h,this.Bo,this.v,this.j,this.gt,this.Ji,this.yo,this.Po,this.Uo,this.nn(x.Eo)),this.si=new A(this.Ji,this.yo,this.j,this.Qi,this.v,this.gt,this.h,(t=>{if(this.Mo())for(const e of this.re())e.Rs(t)}),this.Bo,this.vt),this.si.initialize(),s.Z.D.info(`Initialized for the Braze backend at "${this.nn(x.Wn)}" with API key "${this.Ji}".`),null!=this.nn(x._o)&&function(t,e,n){let r=`The '${t}' ${e} is deprecated.`;n&&(r+=` Please use '${n}' instead.`),s.Z.D.warn(r)}("enableHtmlInAppMessages","initialization option","allowUserSuppliedJavascript"),D.n.init(),this.To.St(this.vo),this.No=!0,!0}destroy(t){if(s.Z.D.destroy(),this.Mo()){this.Oo.St(),this.Oo.removeAllSubscriptions();for(const t of this.Co)t.destroy();this.Co=[];for(const t of this.Lo)t.clearData(!1);this.Lo=[],this.removeAllSubscriptions(),this.De=[],this.si.destroy(),this.si=null,this.Bo=null,this.Qi=null,this.vt=null,this.gt=null,this.j=null,this.v=null,this.vo={},this.Uo=void 0,this.No=!1,this.wo=!1,t&&(this.h=null)}}rr(){if(this.Wo())return!1;if(!this.Mo())throw new Error("Braze must be initialized before calling methods.");return!0}ea(){return this.Ji}ii(){return this.Bo}Ks(){return this.yo}ce(){return this.Qi}nr(){return this.vt}nn(t){return this.vo[t]}re(){return this.Lo}mr(){return this.si}ir(){return this.gt}g(){return this.j}l(){return this.h}gr(){if(this.v&&this.si)return new B.Z(this.v,this.si)}p(){return this.v}tr(){return!0===this.nn(x.Io)||!0===this.nn(x._o)}u(t){let e=!1;for(const n of this.Co)n===t&&(e=!0);e||this.Co.push(t)}ar(t){let e=!1;for(const n of this.Lo)n.constructor===t.constructor&&(e=!0);t instanceof a.Z&&!e&&this.Lo.push(t)}jt(t){t instanceof i.Z&&this.De.push(t)}removeAllSubscriptions(){if(this.rr())for(const t of this.De)t.removeAllSubscriptions()}removeSubscription(t){if(this.rr())for(const e of this.De)e.removeSubscription(t)}le(t){this.wo=t}Mo(){return this.No}Wo(){return this.wo}Ds(){return this.Po}}const j=new R},45966:function(t,e,n){"use strict";n.d(e,{I:function(){return l},Z:function(){return c}});var r=n(64365),i=n(57559),s=n(42308),o=n(72893),a=n(52367),u=n(17615);const l={iu:{su:"ab.storage.userId",Go:"ab.storage.deviceId",Dh:"ab.storage.sessionId"},q:{ga:"ab.test",Ta:"ab.storage.events",Aa:"ab.storage.attributes",Oa:"ab.storage.attributes.anonymous_user",Ho:"ab.storage.device",Yo:"ab.storage.sdk_metadata",Zo:"ab.storage.session_id_for_cached_metadata",gn:"ab.storage.pushToken",ei:"ab.storage.newsFeed",hi:"ab.storage.lastNewsFeedRefresh",P:"ab.storage.cardImpressions",nh:"ab.storage.serverConfig",ba:"ab.storage.triggers",Ia:"ab.storage.triggers.ts",Ch:"ab.storage.messagingSessionStart",Yt:"ab.storage.cc",vs:"ab.storage.ccLastFullSync",ys:"ab.storage.ccLastCardUpdated",$:"ab.storage.ccClicks",O:"ab.storage.ccImpressions",K:"ab.storage.ccDismissals",Ka:"ab.storage.lastDisplayedTriggerTimesById",Ya:"ab.storage.lastDisplayedTriggerTime",Da:"ab.storage.triggerFireInstancesById",Jn:"ab.storage.signature",As:"ab.storage.brazeSyncRetryCount",_s:"ab.storage.sdkVersion"},ae:"ab.optOut"};class c{constructor(t,e){this.Ga=t,this.Na=e}ru(t,e){let n=e;null!=e&&e instanceof s.Z&&(n=e.ss()),this.Ga.store(t,n)}va(t){const e=this.tu(t);null!=e&&(e._h=(new Date).valueOf(),this.ru(t,e))}tu(t){return s.Z.yn(this.Ga.lr(t))}qh(t){this.Ga.remove(t)}bo(t){if(null==t||0===t.length)return!1;(0,o.kJ)(t)||(t=[t]);let e=this.Na.lr(l.q.Ta);null!=e&&(0,o.kJ)(e)||(e=[]);for(let n=0;n<t.length;n++)e.push(t[n].ss());return this.Na.store(l.q.Ta,e)}Hh(t){return null!=t&&this.bo([t])}Ca(){let t=this.Na.lr(l.q.Ta);this.Na.remove(l.q.Ta),null==t&&(t=[]);const e=[];let n=!1,r=null;if((0,o.kJ)(t))for(let s=0;s<t.length;s++)i.Z.Ma(t[s])?e.push(i.Z.yn(t[s])):r=s;else n=!0;if(n||null!=r){let s="Stored events could not be deserialized as Events";n&&(s+=", was "+Object.prototype.toString.call(t)+" not an array"),null!=r&&(s+=", value at index "+r+" does not look like an event"),s+=", serialized values were of type "+typeof t+": "+JSON.stringify(t),e.push(new i.Z(null,a.Z.A.qs,(new Date).valueOf(),null,{e:s}))}return e}B(t,e){return!!(0,o.fk)(l.q,t,"StorageManager cannot store object.","STORAGE_KEYS.OBJECTS")&&this.Na.store(t,e)}I(t){return!!(0,o.fk)(l.q,t,"StorageManager cannot retrieve object.","STORAGE_KEYS.OBJECTS")&&this.Na.lr(t)}Xs(t){return!!(0,o.fk)(l.q,t,"StorageManager cannot remove object.","STORAGE_KEYS.OBJECTS")&&(this.Na.remove(t),!0)}clearData(){const t=(0,o.XP)(l.iu),e=(0,o.XP)(l.q);for(let n=0;n<t.length;n++){const e=t[n];this.Ga.remove(l.iu[e])}for(let n=0;n<e.length;n++){const t=e[n];this.Na.remove(l.q[t])}}ya(t){return t||l.q.Oa}pa(t){let e=this.Na.lr(l.q.Aa);null==e&&(e={});const n=this.ya(t[u.Z._n]);for(let r in t)r===u.Z._n||null!=e[n]&&null!=e[n][r]||this.mu(t[u.Z._n],r,t[r])}mu(t,e,n){let r=this.Na.lr(l.q.Aa);null==r&&(r={});const i=this.ya(t);let s=r[i];if(null==s&&(s={},null!=t&&(s[u.Z._n]=t)),e===u.Z.lu){null==s[e]&&(s[e]={});for(let t in n)s[e][t]=n[t]}else s[e]=n;return r[i]=s,this.Na.store(l.q.Aa,r)}Ua(){const t=this.Na.lr(l.q.Aa);this.Na.remove(l.q.Aa);const e=[];for(let n in t)null!=t[n]&&e.push(t[n]);return e}ou(t){const e=this.Na.lr(l.q.Aa);if(null!=e){const n=this.ya(null),r=e[n];null!=r&&(e[n]=void 0,this.Na.store(l.q.Aa,e),r[u.Z._n]=t,this.pa(r))}const n=this.tu(l.iu.Dh);let r=null;null!=n&&(r=n.eu);const i=this.Ca();if(null!=i)for(let s=0;s<i.length;s++){const e=i[s];null==e.userId&&e.sessionId==r&&(e.userId=t),this.Hh(e)}}Ba(){return this.Na.Fa}}c.wa=class{constructor(t){this.Ji=t,this.Fa=r.Z.La()?3:10}Pa(t){return t+"."+this.Ji}store(t,e){const n={v:e};try{return localStorage.setItem(this.Pa(t),JSON.stringify(n)),!0}catch(t){return a.Z.D.info("Storage failure: "+t.message),!1}}lr(t){try{const e=JSON.parse(localStorage.getItem(this.Pa(t)));return null==e?null:e.v}catch(t){return a.Z.D.info("Storage retrieval failure: "+t.message),null}}remove(t){try{localStorage.removeItem(this.Pa(t))}catch(t){return a.Z.D.info("Storage removal failure: "+t.message),!1}}},c.ne=class{constructor(t,e){this.Ji=t,this.xa=this.Ja(),this.ka=576e3,this.Va=!!e}Pa(t){return null!=this.Ji?t+"."+this.Ji:t}Ja(){let t=0,e=document.location.hostname;const n=e.split("."),r="ab._gd";for(;t<n.length-1&&-1===document.cookie.indexOf(r+"="+r);)t++,e="."+n.slice(-1-t).join("."),document.cookie=r+"="+r+";domain="+e+";";return document.cookie=r+"=;expires="+new Date(0).toGMTString()+";domain="+e+";",e}ie(){const t=new Date;return t.setTime(t.getTime()+60*this.ka*1e3),t.getFullYear()}za(){const t=(0,o.VO)(l.iu),e=document.cookie.split(";");for(let n=0;n<e.length;n++){let r=e[n];for(;" "===r.charAt(0);)r=r.substring(1);let i=!1;for(let e=0;e<t.length;e++)if(0===r.indexOf(t[e])){i=!0;break}if(i){const t=r.split("=")[0];-1===t.indexOf("."+this.Ji)&&this.Qa(t)}}}store(t,e){this.za();const n=new Date;n.setTime(n.getTime()+60*this.ka*1e3);const r="expires="+n.toUTCString(),i="domain="+this.xa;let s;s=this.Va?e:encodeURIComponent(JSON.stringify(e));const o=this.Pa(t)+"="+s+";"+r+";"+i+";path=/";return o.length>=4093?(a.Z.D.info("Storage failure: string is "+o.length+" chars which is too large to store as a cookie."),!1):(document.cookie=o,!0)}lr(t){const e=[],n=this.Pa(t)+"=",r=document.cookie.split(";");for(let i=0;i<r.length;i++){let s=r[i];for(;" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(n))try{let t;t=this.Va?s.substring(n.length,s.length):JSON.parse(decodeURIComponent(s.substring(n.length,s.length))),e.push(t)}catch(e){return a.Z.D.info("Storage retrieval failure: "+e.message),this.remove(t),null}}return e.length>0?e[e.length-1]:null}remove(t){this.Qa(this.Pa(t))}Qa(t){const e=t+"=;expires="+new Date(0).toGMTString();document.cookie=e,document.cookie=e+";path=/";const n=e+";domain="+this.xa;document.cookie=n,document.cookie=n+";path=/"}},c._a=class{constructor(){this.Ha={},this.Wa=5242880,this.Fa=3}store(t,e){const n={value:e},r=this.Xa(e);return r>this.Wa?(a.Z.D.info("Storage failure: object is \u2248"+r+" bytes which is greater than the max of "+this.Wa),!1):(this.Ha[t]=n,!0)}Xa(t){const e=[],n=[t];let r=0;for(;n.length;){const t=n.pop();if("boolean"==typeof t)r+=4;else if("string"==typeof t)r+=2*t.length;else if("number"==typeof t)r+=8;else if("object"==typeof t&&-1===e.indexOf(t)){e.push(t);for(let e in t)n.push(t[e])}}return r}lr(t){const e=this.Ha[t];return null==e?null:e.value}remove(t){this.Ha[t]=null}},c.Ea=class{constructor(t,e,n){this.Za=[],e&&this.Za.push(new c.ne(t)),n&&this.Za.push(new c.wa(t)),this.Za.push(new c._a(t))}store(t,e){let n=!0;for(let r=0;r<this.Za.length;r++)n=this.Za[r].store(t,e)&&n;return n}lr(t){for(let e=0;e<this.Za.length;e++){const n=this.Za[e].lr(t);if(null!=n)return n}return null}remove(t){for(let e=0;e<this.Za.length;e++)this.Za[e].remove(t)}}},74663:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(52367);class i{constructor(){this.De={}}ut(t){if("function"!=typeof t)return null;const e=r.Z.it.nt();return this.De[e]=t,e}removeSubscription(t){delete this.De[t]}removeAllSubscriptions(){this.De={}}St(t){const e=[];for(let n in this.De)e.push(this.De[n](t));return e}}},63826:function(t,e){"use strict";e.Z={ua:"invalid_api_key",ca:"blacklisted",la:"no_device_identifier",ha:"invalid_json_response",oa:"empty_response",__:"sdk_auth_error"}},57559:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(72893),i=n(2979);class s{constructor(t,e,n,r,s){this.userId=t,this.type=e,this.time=(0,i._0)(n),this.sessionId=r,this.data=s}li(){const t={name:this.type,time:(0,i.FX)(this.time),data:this.data||{},session_id:this.sessionId};return null!=this.userId&&(t.user_id=this.userId),t}ss(){return{u:this.userId,t:this.type,ts:this.time,s:this.sessionId,d:this.data}}static fromJson(t){return new s(t.user_id,t.name,t.time,t.session_id,t.data)}static Ma(t){return null!=t&&(0,r.Kn)(t)&&null!=t.t&&""!==t.t}static yn(t){return new s(t.u,t.t,t.ts,t.s,t.d)}}},42308:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(52367);class i{constructor(t,e,n){null==t&&(t=r.Z.it.nt()),n=parseInt(n),(isNaN(n)||0===n)&&(n=(new Date).valueOf()),this.eu=t,this.xh=n,this._h=(new Date).valueOf(),this.Nh=e}ss(){return{g:this.eu,e:this.Nh,c:this.xh,l:this._h}}static yn(t){if(null==t||null==t.g)return null;const e=new i(t.g,t.e,t.c);return e._h=t.l,e}}},63552:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(2979);class i{constructor(t,e,n,r,i){this.endpoint=t||null,this.wn=e||null,this.publicKey=n||null,this.tl=r||null,this.oh=i||null}ss(){return{e:this.endpoint,c:this.wn,p:this.publicKey,u:this.tl,v:this.oh}}static yn(t){return new i(t.e,(0,r.Rd)(t.c),t.p,t.u,t.v)}}},24673:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});class r{constructor(t,e){this.S=!!t,this.ve=e||[]}V(t){this.S=this.S&&t.S,this.ve.push(...t.ve)}}},24365:function(t,e){"use strict";e.Z={OPEN:"open",Rr:"purchase",vr:"push_click",be:"custom_event",Ar:"iam_click",ks:"test"}},95280:function(t,e,n){"use strict";n.d(e,{n:function(){return V}});var r=n(41843),i=n(57801);class s{constructor(t){this.triggerId=t}static fromJson(t){return new s(t.trigger_id)}}var o=n(64365);const a={cu:null,eo:function(t,e,n,r){if(null==t)return!1;e=e||!1,n=n||!1;const i=t.getBoundingClientRect();return null!=i&&(i.top>=0&&i.top<=(window.innerHeight||document.documentElement.clientHeight)||!e)&&(i.left>=0||!r)&&(i.bottom>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)||!n)&&(i.right<=(window.innerWidth||document.documentElement.clientWidth)||!r)}};function u(){if(null==a.cu){a.cu=!1;try{const t=Object.defineProperty({},"passive",{get:()=>{a.cu=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(t){}}return a.cu}function l(t){if(t.onclick){const e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),t.onclick.apply(t,[e])}}const c=27;var h=n(74663);class d{constructor(t,e,n,r,i,s,o,a,u,l,c,f,g,p,m,v,y,b,_,w,S,A,E,O,k,I,N,D,T){this.message=t,this.messageAlignment=e||d.TextAlignment.CENTER,this.duration=l||5e3,this.slideFrom=n||d.SlideFrom.BOTTOM,this.extras=r||{},this.triggerId=i,this.clickAction=s||d.ClickAction.NONE,this.uri=o,this.openTarget=a||d.OpenTarget.NONE,this.dismissType=u||d.DismissType.AUTO_DISMISS,this.icon=c,this.imageUrl=f,this.imageStyle=g||d.ImageStyle.TOP,this.iconColor=p||d.ji.ki,this.iconBackgroundColor=m||d.ji.bi,this.backgroundColor=v||d.ji.ki,this.textColor=y||d.ji.Ei,this.closeButtonColor=b||d.ji.Ti,this.animateIn=_,null==this.animateIn&&(this.animateIn=!0),this.animateOut=w,null==this.animateOut&&(this.animateOut=!0),this.header=S,this.headerAlignment=A||d.TextAlignment.CENTER,this.headerTextColor=E||d.ji.Ei,this.frameColor=O||d.ji.Ii,this.buttons=k||[],this.cropType=I||d.CropType.FIT_CENTER,this.orientation=N,this.htmlId=D,this.css=T,this.Ai=!1,this.nl=!1,this.Ni=!1,this.lt=new h.Z,this._i=new h.Z}subscribeToClickedEvent(t){return this.lt.ut(t)}subscribeToDismissedEvent(t){return this._i.ut(t)}removeSubscription(t){this.lt.removeSubscription(t),this._i.removeSubscription(t)}removeAllSubscriptions(){this.lt.removeAllSubscriptions(),this._i.removeAllSubscriptions()}closeMessage(){this.on(this.mn)}we(){return!0}ll(){return this.we()}an(){return null!=this.htmlId&&this.htmlId.length>4}sn(){return this.an()&&null!=this.css&&this.css.length>0}rn(){if(this.an()&&this.sn())return this.htmlId+"-css"}R(){return!this.Ai&&(this.Ai=!0,!0)}k(){return!this.nl&&(this.nl=!0,this.lt.St(),!0)}J(){return!this.Ni&&(this.Ni=!0,this._i.St(),!0)}Li(t){if(t&&t.parentNode){let e=t.closest(".ab-iam-root");if(null==e&&(e=t),this.we()&&null!=e.parentNode){const t=e.parentNode.classList;t&&t.contains(d.Oi)&&t.remove(d.Oi),document.body.removeEventListener("touchmove",d.Si)}e.className=e.className.replace(d.Di,d._)}return this.animateOut}on(t,e){if(null==t)return;let n;this.mn=null,n=-1===t.className.indexOf("ab-in-app-message")?t.getElementsByClassName("ab-in-app-message")[0]:t;let r=!1;n&&(r=this.Li(n));const i=document.body;if(null!=i)var s=i.scrollTop;const a=()=>{if(t&&t.parentNode){let e=t.closest(".ab-iam-root");null==e&&(e=t),e.parentNode&&e.parentNode.removeChild(e)}if(null!=this.rn()){const t=document.getElementById(this.rn());t&&t.parentNode&&t.parentNode.removeChild(t)}null!=i&&"Safari"===o.Z.browser&&(i.scrollTop=s),e?e():this.J()};r?setTimeout(a,d.Mi):a(),this.he&&this.he.focus()}Me(){return document.createTextNode(this.message)}xe(t){let e="";this.message||this.header||!this.we()||(e="Modal Image"),t.setAttribute("alt",e)}static Si(t){t.targetTouches&&t.targetTouches.length>1||t.target.classList&&t.target.classList.contains("ab-message-text")&&t.target.scrollHeight>t.target.clientHeight||document.querySelector(`.${d.Oi}`)&&t.preventDefault()}Ri(t){this.we()&&null!=t.parentNode&&this.orientation!==d.Orientation.LANDSCAPE&&(null!=t.parentNode.classList&&t.parentNode.classList.add(d.Oi),document.body.addEventListener("touchmove",d.Si,!!u()&&{passive:!1})),t.className+=" "+d.Di}static Pi(t){if(t.keyCode===c&&!i.ZP.nn(i.JY.Ui)&&document.querySelectorAll(".ab-modal-interactions").length>0){const t=document.getElementsByClassName("ab-html-message");let e=!1;for(let n=0;n<t.length;n++){const r=t[n].contentWindow.document.getElementsByClassName("ab-programmatic-close-button")[0];null!=r&&(l(r),e=!0)}if(!e){const t=document.querySelectorAll(".ab-modal-interactions > .ab-close-button")[0];null!=t&&l(t)}}}Hi(){this.Fi||i.ZP.nn(i.JY.Ui)||(document.addEventListener("keydown",d.Pi,!1),i.ZP.Bi((()=>{document.removeEventListener("keydown",d.Pi)})),this.Fi=!0)}}d.ji={Ei:4281545523,ki:4294967295,bi:4278219733,Gi:4293914607,Wi:4283782485,Ii:3224580915,Ti:4288387995},d.Oe={wi:"hd",yi:"ias",xi:"of",Ki:"do",ci:"umt",ui:"tf",Yi:"te"},d.SlideFrom={TOP:"TOP",BOTTOM:"BOTTOM"},d.ClickAction={NEWS_FEED:"NEWS_FEED",URI:"URI",NONE:"NONE"},d.DismissType={AUTO_DISMISS:"AUTO_DISMISS",MANUAL:"SWIPE"},d.OpenTarget={NONE:"NONE",BLANK:"BLANK"},d.ImageStyle={TOP:"TOP",GRAPHIC:"GRAPHIC"},d.Orientation={PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE"},d.TextAlignment={START:"START",CENTER:"CENTER",END:"END"},d.CropType={CENTER_CROP:"CENTER_CROP",FIT_CENTER:"FIT_CENTER"},d.es={Xi:"SLIDEUP",zi:"MODAL",ye:"MODAL_STYLED",Tr:"FULL",el:"WEB_HTML",cn:"HTML"},d.Mi=500,d.Vi=200,d.Di="ab-show",d.$i="ab-hide",d.Oi="ab-pause-scrolling";class f extends d{constructor(t,e,n,r,i,s,o,a,u,l,c){r=r||d.DismissType.MANUAL,null!=t&&t.length>0&&t.indexOf('"ab-in-app-message ab-html-message ab-email-capture"')>0&&t.indexOf('"ab-in-app-message ab-show ab-modal ab-effect-modal"')>0&&(s=!0,o=!0),super(t,null,null,e,n,null,null,null,r,i,null,null,null,null,null,null,null,null,s,o,null,null,null,a,void 0,void 0,void 0,u,l),this.messageFields=c}ll(){return!1}k(t){if(this.un===d.es.el){if(this.nl)return!1;this.nl=!0}return this.lt.St(t),!0}}f.es=d.es.el;class g{constructor(t,e,n,r,i,s,o){this.text=t||"",this.backgroundColor=e||d.ji.bi,this.textColor=n||d.ji.ki,this.borderColor=r||this.backgroundColor,this.clickAction=i||d.ClickAction.NONE,this.uri=s,null==o&&(o=g.Ue),this.id=o,this.nl=!1,this.lt=new h.Z}subscribeToClickedEvent(t){return this.lt.ut(t)}removeSubscription(t){this.lt.removeSubscription(t)}removeAllSubscriptions(){this.lt.removeAllSubscriptions()}k(){return!this.nl&&(this.nl=!0,this.lt.St(),!0)}static fromJson(t){return new g(t.text,t.bg_color,t.text_color,t.border_color,t.click_action,t.uri,t.id)}}g.Ue=-1;var p=n(39179);class m extends d{constructor(t,e,n,r,i,s,o,a,u,l,c,h,f,g,p,m,v,y,b,_,w,S,A,E,O,k,I,N){a=a||d.DismissType.MANUAL,k=k||d.Orientation.PORTRAIT,super(t,e,null,n,r,i,s,o,a,u,l,c,h,f,g,p,m,v,y,b,_,w,S,A,E,O=O||d.CropType.CENTER_CROP,k,I,N)}get ke(){return d.TextAlignment.CENTER}}m.es=d.es.Tr;class v extends d{constructor(t,e,n,r,i,s,o,a,u,l,c,h,f,g,p,m,v,y,b,_,w,S,A,E,O,k,I){super(t,e,null,n,r,i,s,o,a=a||d.DismissType.MANUAL,u,l,c,h,f,g,p,m,v,y,b,_,w,S,A,E,O=O||d.CropType.FIT_CENTER,void 0,k,I)}get ke(){return d.TextAlignment.CENTER}}v.es=d.es.zi;class y extends d{constructor(t,e,n,r,i,s,o,a,u,l,c,h,f,g,p,m,v,y,b,_,w){m=m||d.ji.Wi,p=p||d.ji.Gi,super(t,e=e||d.TextAlignment.START,n,r,i,s,o,a,u,l,c,h,null,f,g,p,m,v,y,b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,_,w)}we(){return!1}get ke(){return d.TextAlignment.START}Me(){const t=document.createElement("span");return t.appendChild(document.createTextNode(this.message)),t}Ri(t){const e=t.getElementsByClassName("ab-in-app-message")[0];a.eo(e,!0,!0)||(this.slideFrom===d.SlideFrom.TOP?e.style.top="0px":e.style.bottom="0px"),super.Ri(t)}}y.es=d.es.Xi;var b=n(52367);function _(t){if(t.is_control)return s.fromJson(t);let e=t.type;null!=e&&(e=e.toUpperCase());const n=t.message,r=t.text_align_message,i=t.slide_from,o=t.extras,a=t.trigger_id,u=t.click_action,l=t.uri,c=t.open_target,h=t.message_close,p=t.duration,_=t.icon,w=t.image_url,S=t.image_style,A=t.icon_color,E=t.icon_bg_color,O=t.bg_color,k=t.text_color,I=t.close_btn_color,N=t.header,D=t.text_align_header,T=t.header_text_color,Z=t.frame_color,B=[];let C=t.btns;null==C&&(C=[]);for(let s=0;s<C.length;s++)B.push(g.fromJson(C[s]));const P=t.crop_type,x=t.orientation,R=t.animate_in,j=t.animate_out;let q,L=t.html_id,U=t.css;if(null!=L&&""!==L&&null!=U&&""!==U||(L=void 0,U=void 0),e===v.es||e===d.es.ye)q=new v(n,r,o,a,u,l,c,h,p,_,w,S,A,E,O,k,I,R,j,N,D,T,Z,B,P,L,U);else if(e===m.es)q=new m(n,r,o,a,u,l,c,h,p,_,w,S,A,E,O,k,I,R,j,N,D,T,Z,B,P,x,L,U);else if(e===y.es)q=new y(n,r,i,o,a,u,l,c,h,p,_,w,A,E,O,k,I,R,j,L,U);else{if(e!==f.es&&e!==d.es.cn)return void b.Z.D.error("Ignoring message with unknown type "+e);{const e=t.message_fields;q=new f(n,o,a,h,p,R,j,Z,L,U,e),q.trusted=t.trusted||!1}}return q.un=e,q}var w=n(96504),S=n(24673),A=n(2979);class E{constructor(t){this.xl=t}zl(t){return null==this.xl||this.xl===t[0]}static fromJson(t){return new E(t?t.event_name:null)}ss(){return this.xl}}var O=n(72893);class k{constructor(t,e,n,r){this.El=t,this.Tl=e,this.comparator=n,this._l=r,this.Tl===k.Ml.Nl&&this.comparator!==k.Hl.Rl&&this.comparator!==k.Hl.Ll&&this.comparator!==k.Hl.Il&&this.comparator!==k.Hl.Ol&&(this._l=(0,A.X2)(this._l))}zl(t){let e=null;switch(null!=t&&(e=t[this.El]),this.comparator){case k.Hl.Ul:return null!=e&&e.valueOf()===this._l.valueOf();case k.Hl.Dl:return null==e||e.valueOf()!==this._l.valueOf();case k.Hl.Ql:return typeof e==typeof this._l&&e>this._l;case k.Hl.Rl:return this.Tl===k.Ml.Nl?null!=e&&(0,O.J_)(e)&&(0,A.$N)(e)<=this._l:typeof e==typeof this._l&&e>=this._l;case k.Hl.Xl:return typeof e==typeof this._l&&e<this._l;case k.Hl.Ll:return this.Tl===k.Ml.Nl?null!=e&&(0,O.J_)(e)&&(0,A.$N)(e)>=this._l:typeof e==typeof this._l&&e<=this._l;case k.Hl.Gl:return null!=e&&"string"==typeof e&&typeof e==typeof this._l&&null!=e.match(this._l);case k.Hl.Fl:return null!=e;case k.Hl.Jl:return null==e;case k.Hl.Il:return null!=e&&(0,O.J_)(e)&&(0,A.yo)(e)<this._l;case k.Hl.Ol:return null!=e&&(0,O.J_)(e)&&(0,A.yo)(e)>this._l;case k.Hl.Vl:return null==e||typeof e!=typeof this._l||"string"!=typeof e||null==e.match(this._l)}return!1}static fromJson(t){return new k(t.property_key,t.property_type,t.comparator,t.property_value)}ss(){let t=this._l;return(0,O.J_)(this._l)&&(t=(0,A.FX)(t.valueOf())),{k:this.El,t:this.Tl,c:this.comparator,v:t}}static yn(t){return new k(t.k,t.t,t.c,t.v)}}k.Hl={Ul:1,Dl:2,Ql:3,Rl:4,Xl:5,Ll:6,Gl:10,Fl:11,Jl:12,Il:15,Ol:16,Vl:17},k.Ml={ql:"boolean",Kl:"number",Pl:"string",Nl:"date"};class I{constructor(t){this.filters=t}zl(t){let e=!0;for(let n=0;n<this.filters.length;n++){const r=this.filters[n];let i=!1;for(let e=0;e<r.length;e++)if(r[e].zl(t)){i=!0;break}if(!i){e=!1;break}}return e}static fromJson(t){if(null==t||!(0,O.kJ)(t))return null;const e=[];for(let n=0;n<t.length;n++){const r=[],i=t[n];for(let t=0;t<i.length;t++)r.push(k.fromJson(i[t]));e.push(r)}return new I(e)}ss(){const t=[];for(let e=0;e<this.filters.length;e++){const n=this.filters[e],r=[];for(let t=0;t<n.length;t++)r.push(n[t].ss());t.push(r)}return t}static yn(t){const e=[];for(let n=0;n<t.length;n++){const r=[],i=t[n];for(let t=0;t<i.length;t++)r.push(k.yn(i[t]));e.push(r)}return new I(e)}}class N{constructor(t,e){this.xl=t,this.Bl=e}zl(t){if(null==this.xl||null==this.Bl)return!1;const e=t[0],n=t[1];return e===this.xl&&this.Bl.zl(n)}static fromJson(t){return new N(t?t.event_name:null,t?I.fromJson(t.property_filters):null)}ss(){return{e:this.xl,pf:this.Bl.ss()}}}class D{constructor(t,e){this.Wl=t,this.Yl=e}zl(t){if(null==this.Wl)return!1;const e=P.Zl(t[0],this.Wl);if(!e)return!1;let n=null==this.Yl||0===this.Yl.length;if(null!=this.Yl)for(let r=0;r<this.Yl.length;r++)if(this.Yl[r]===t[1]){n=!0;break}return e&&n}static fromJson(t){return new D(t?t.id:null,t?t.buttons:null)}ss(){return this.Wl}}class T{constructor(t){this.productId=t}zl(t){return null==this.productId||t[0]===this.productId}static fromJson(t){return new T(t?t.product_id:null)}ss(){return this.productId}}class Z{constructor(t,e){this.productId=t,this.Bl=e}zl(t){if(null==this.productId||null==this.Bl)return!1;const e=t[0],n=t[1];return e===this.productId&&this.Bl.zl(n)}static fromJson(t){return new Z(t?t.product_id:null,t?I.fromJson(t.property_filters):null)}ss(){return{id:this.productId,pf:this.Bl.ss()}}}class B{constructor(t){this.Wl=t}zl(t){return null==this.Wl||P.Zl(t[0],this.Wl)}static fromJson(t){return new B(t?t.campaign_id:null)}ss(){return this.Wl}}var C=n(24365);class P{constructor(t,e){this.type=t,this.data=e}qa(t,e){return P.$a[this.type]===t&&(null==this.data||this.data.zl(e))}static Zl(t,e){let n=null;try{n=window.atob(t)}catch(e){return b.Z.D.info("Failed to unencode analytics id "+t+": "+e.message),!1}return e===n.split("_")[0]}static fromJson(t){const e=t.type;let n;switch(e){case P.ec.OPEN:n=null;break;case P.ec.Rr:n=T.fromJson(t.data);break;case P.ec.tc:n=Z.fromJson(t.data);break;case P.ec.vr:n=B.fromJson(t.data);break;case P.ec.be:n=E.fromJson(t.data);break;case P.ec.rc:n=N.fromJson(t.data);break;case P.ec.Ar:n=D.fromJson(t.data);break;case P.ec.ks:n=null}return new P(e,n)}ss(){return{t:this.type,d:this.data?this.data.ss():null}}static yn(t){let e,n;switch(t.t){case P.ec.OPEN:e=null;break;case P.ec.Rr:e=new T(t.d);break;case P.ec.tc:n=t.d||{},e=new Z(n.id,I.yn(n.pf||[]));break;case P.ec.vr:e=new B(t.d);break;case P.ec.be:e=new E(t.d);break;case P.ec.rc:n=t.d||{},e=new N(n.e,I.yn(n.pf||[]));break;case P.ec.Ar:e=new D(t.d);break;case P.ec.ks:e=null}return new P(t.t,e)}}P.ec={OPEN:"open",Rr:"purchase",tc:"purchase_property",vr:"push_click",be:"custom_event",rc:"custom_event_property",Ar:"iam_click",ks:"test"},P.$a={},P.$a[P.ec.OPEN]=C.Z.OPEN,P.$a[P.ec.Rr]=C.Z.Rr,P.$a[P.ec.tc]=C.Z.Rr,P.$a[P.ec.vr]=C.Z.vr,P.$a[P.ec.be]=C.Z.be,P.$a[P.ec.rc]=C.Z.be,P.$a[P.ec.Ar]=C.Z.Ar,P.$a[P.ec.ks]=C.Z.ks;class x{constructor(t,e,n,r,i,s,o,a,u,l,c,h){this.id=t,this.Th=e||[],void 0===n&&(n=null),this.startTime=n,void 0===r&&(r=null),this.endTime=r,this.priority=i||0,this.type=s,this.Ph=a||0,null==l&&(l=1e3*(this.Ph+30)),this.vi=l,this.data=o,null==u&&(u=x.yh),this.Ah=u,this.Ih=c,this.$h=h||null}Mh(t){return null==this.$h||this.Ah!==x.yh&&t-this.$h>=1e3*this.Ah}Bh(t){this.$h=t}Jh(t){const e=t+1e3*this.Ph;return Math.max(e-(new Date).valueOf(),0)}Lh(t){const e=(new Date).valueOf()-t,n=null==t||isNaN(e)||null==this.vi||e<this.vi;return n||b.Z.D.info(`Trigger action ${this.type} is no longer eligible for display - fired ${e}ms ago and has a timeout of ${this.vi}ms.`),!n}static fromJson(t){const e=t.id,n=[];for(let d=0;d<t.trigger_condition.length;d++)n.push(P.fromJson(t.trigger_condition[d]));const r=(0,A.X2)(t.start_time),i=(0,A.X2)(t.end_time),s=t.priority,o=t.type,a=t.delay,u=t.re_eligibility,l=t.timeout,c=t.data,h=t.min_seconds_since_last_trigger;return(0,O.fk)(x.gi,o,"Could not construct Trigger from server data","Trigger.Types")?new x(e,n,r,i,s,o,c,a,u,l,h):null}ss(){const t=[];for(let e=0;e<this.Th.length;e++)t.push(this.Th[e].ss());return{i:this.id,c:t,s:this.startTime,e:this.endTime,p:this.priority,t:this.type,da:this.data,d:this.Ph,r:this.Ah,tm:this.vi,ss:this.Ih,ld:this.$h}}static yn(t){const e=[];for(let n=0;n<t.c.length;n++)e.push(P.yn(t.c[n]));return new x(t.i,e,(0,A.Rd)(t.s),(0,A.Rd)(t.e),t.p,t.t,t.da,t.d,t.r,t.tm,t.ss,t.ld)}}x.yh=-1,x.gi={mi:"inapp",Rh:"templated_iam"};var R=n(3905),j=n(73046),q=n(74556);class L{constructor(t,e,n,r){this.vt=t,this.j=e,this.h=n,this.v=r,this.De=new h.Z,i.ZP.jt(this.De),this._e=1e3,this.Se=6e4}Be(){return this.De}Ee(t){return this.De.ut(t)}Fe(){return this.Ge}Ne(t){this.Ge=t}qe(t,e){if(!(0,O.fk)(d.Oe,e,`${e} is not a valid in-app message display failure`,"InAppMessage.DisplayFailures"))return new S.Z;const n={trigger_ids:[t],error_code:e};return p.Z.G(b.Z.A.Pe,n)}G(t,e,n,r){const i=new S.Z;let o;if(t instanceof s)o={trigger_ids:[t.triggerId]};else{if(e===b.Z.A.Re||t instanceof f&&e===b.Z.A.He){if(!t.k(r))return b.Z.D.info("This in-app message has already received a click. Ignoring analytics event."),i}else if(e===b.Z.A.Je&&!t.R())return b.Z.D.info("This in-app message has already received an impression. Ignoring analytics event."),i;o=this.Ke(t)}return null==o?i:(null!=n&&(o.bid=n),p.Z.G(e,o))}Qe(t,e){const n=new S.Z;if(!t.k())return b.Z.D.info("This in-app message button has already received a click. Ignoring analytics event."),n;const r=this.Ke(e);return null==r?n:t.id===g.Ue?(b.Z.D.info("This in-app message button does not have a tracking id. Not logging event to Braze servers."),n):(null!=t.id&&(r.bid=t.id),p.Z.G(b.Z.A.He,r))}Ve(t){if(!(t instanceof d))return;const e=t=>{const e=(0,j.OL)(t);return(0,j.je)(e)?(0,j.Tu)(j.yi.We,"In-App Message"):(0,j.zA)(e)&&!q.Z.Xe()?(0,j.Tu)(j.yi.Ye,"In-App Message"):void 0},n=t.buttons;let r;for(const i of n)if(i.clickAction===d.ClickAction.URI&&R.y9.test(i.uri)&&(r=e(i.uri),r))return r;return t.clickAction===d.ClickAction.URI&&R.y9.test(t.uri)?e(t.uri):void 0}Ze(t,e,n,i){let s=this.vt.ni(!1,!1);s=this.vt.Ps(s),s.template={trigger_id:t.triggerId,trigger_event_type:e},null!=n&&(s.template.data=n.li());const o=this.vt.Bs(s);this.vt.Gs(s,(()=>{r.Z.Hs({url:`${this.vt.Ks()}/template/`,data:s,headers:o,S:async e=>{if(!this.vt.Os(s,e,o))return this.qe(t.triggerId,d.Oe.ui),void("function"==typeof t.pi&&t.pi());if(this.vt.Qs(),null==e||null==e.templated_message)return void this.qe(t.triggerId,d.Oe.ui);const n=e.templated_message;if(n.type!==x.gi.mi)return void this.qe(t.triggerId,d.Oe.ci);const r=_(n.data);if(null==r)return void this.qe(t.triggerId,d.Oe.ci);let i=this.Ve(r);if(i)return b.Z.D.error(i),void("function"==typeof t.pi&&t.pi());"function"==typeof t.fi?t.fi(r):this.qe(t.triggerId,d.Oe.ui)},error:r=>{let s=`getting user personalization for message ${t.triggerId}`;if((new Date).valueOf()-t.di>t.vi)this.qe(t.triggerId,d.Oe.ui);else{const r=Math.min(t.vi,this.Se),o=this._e;null==i&&(i=o);const a=Math.min(r,(0,w.R)(o,3*i));s+=`. Retrying in ${a} ms`,setTimeout((()=>{this.Ze(t,e,n,a)}),a)}this.vt.Vs(r,s)}})}))}Ke(t){if(null==t.triggerId)return b.Z.D.info("The in-app message has no analytics id. Not logging event to Braze servers."),null;const e={};return null!=t.triggerId&&(e.trigger_ids=[t.triggerId]),e}}const U={Ae:null,t:!1,m:()=>(U.o(),U.Ae||(U.Ae=new L(i.ZP.nr(),i.ZP.g(),i.ZP.l(),i.ZP.p())),U.Ae),o:()=>{U.t||(i.ZP.u(U),U.t=!0)},destroy:()=>{U.Ae=null,U.t=!1}};var $=U,M=n(40158),F=n(57559),J=n(45966);class z{constructor(t,e,n,r,i){this.triggerId=t,this.fi=e,this.pi=n,this.di=r,this.vi=i}static fromJson(t,e,n,r,i){return null==t||null==t.trigger_id?null:new z(t.trigger_id,e,n,r,i)}}class H extends M.Z{constructor(t,e,n,r,i){super(),this.Oh=t,this.yt=e,this.h=n,this.si=r,this.Uh=i,this.Kh=[],this.Qh=[],this.Vh=null,this.Xh={},this.Yh={},this.Zh(),this.tg()}ig(){this.Vh=this.h.I(J.I.q.Ya)||this.Vh,this.Xh=this.h.I(J.I.q.Da)||this.Xh,this.Yh=this.h.I(J.I.q.Ka)||this.Yh;for(let t=0;t<this.sg.length;t++){const e=this.sg[t];null!=this.Yh[e.id]&&e.Bh(this.Yh[e.id])}}Zh(){this.eg=this.h.I(J.I.q.Ia)||0;const t=this.h.I(J.I.q.ba)||[],e=[];for(let n=0;n<t.length;n++)e.push(x.yn(t[n]));this.sg=e,this.ig()}tg(){const t=this,e=function(e,n,r,i,s){return function(){t.hg(e,n,r,i,s)}},n={};for(let i=0;i<this.sg.length;i++)n[this.sg[i].id]=this.sg[i];let r=!1;for(let i=0;i<this.sg.length;i++){const t=this.sg[i];if(null!=this.Xh[t.id]){const i=this.Xh[t.id],s=[];for(let r=0;r<i.length;r++){const o=i[r],a=t.Jh(o.di);if(a>0){let r,i;s.push(o),null!=o.og&&(r=o.og),null!=o.ng&&F.Z.Ma(o.ng)&&(i=F.Z.yn(o.ng));const u=[];if((0,O.kJ)(o.lg))for(let t=0;t<o.lg.length;t++){const e=n[o.lg[t]];null!=e&&u.push(e)}this.Qh.push(setTimeout(e(t,o.di,r,i,u),a))}}this.Xh[t.id].length>s.length&&(this.Xh[t.id]=s,r=!0,0===this.Xh[t.id].length&&delete this.Xh[t.id])}}r&&this.h.B(J.I.q.Da,this.Xh)}ag(){const t=[];for(let e=0;e<this.sg.length;e++)t.push(this.sg[e].ss());this.eg=(new Date).valueOf(),this.h.B(J.I.q.ba,t),this.h.B(J.I.q.Ia,this.eg)}gg(){(this.h.I(J.I.q.Ia)||0)>this.eg?this.Zh():this.ig()}Rs(t){let e=!1;if(null!=t&&t.triggers){this.ig();const n={},r={};this.sg=[];for(let s=0;s<t.triggers.length;s++){const i=x.fromJson(t.triggers[s]);null!=this.Yh[i.id]&&(i.Bh(this.Yh[i.id]),n[i.id]=this.Yh[i.id]),null!=this.Xh[i.id]&&(r[i.id]=this.Xh[i.id]);for(let t=0;t<i.Th.length;t++)if(i.Th[t].qa(C.Z.ks,null)){e=!0;break}null!=i&&this.sg.push(i)}(0,O.Xy)(this.Yh,n)||(this.Yh=n,this.h.B(J.I.q.Ka,this.Yh)),(0,O.Xy)(this.Xh,r)||(this.Xh=r,this.h.B(J.I.q.Da,this.Xh)),this.ag(),e&&(b.Z.D.info("Trigger with test condition found, firing test."),this.je(C.Z.ks)),this.je(C.Z.OPEN);const i=this.Kh;this.Kh=[];for(let t=0;t<i.length;t++)this.je.apply(this,i[t])}}async hg(t,e,n,r,i){const s=r=>{this.ig();const i=(new Date).valueOf();if(!t.Lh(e))return!1===("undefined"!==typeof navigator?navigator:{userAgent:""}).onLine&&t.type===x.gi.mi&&r.imageUrl?(b.Z.D.info(`Not showing ${t.type} trigger action ${t.id} due to offline state.`),void this.Uh.qe(t.id,d.Oe.Ki)):void(t.Mh(i)&&this.fg(t,i,n)?(this.yt.St([r]),this.cg(t,i)):b.Z.D.info(`Not displaying trigger ${t.id} because display time fell outside of the acceptable time window.`));t.type===x.gi.Rh?this.Uh.qe(t.id,d.Oe.ui):this.Uh.qe(t.id,d.Oe.Yi)},o=()=>{this.ig();const s=i.pop();if(null!=s)if(this.ug(s,e,n,r,i),s.Lh(e)){let t=`Server aborted in-app message display, but the timeout on fallback trigger ${s.id} has already elapsed.`;i.length>0&&(t+=" Continuing to fall back."),b.Z.D.info(t),this.Uh.qe(s.id,d.Oe.Yi),o()}else{b.Z.D.info(`Server aborted in-app message display. Falling back to lower priority ${s.type} trigger action ${t.id}.`);const o=1e3*s.Ph-((new Date).valueOf()-e);o>0?this.Qh.push(setTimeout((()=>{this.hg(s,e,n,r,i)}),o)):this.hg(s,e,n,r,i)}};switch(t.type){case x.gi.mi:const i=_(t.data);if(null==i){b.Z.D.error(`Could not parse trigger data for trigger ${t.id}, ignoring.`),this.Uh.qe(t.id,d.Oe.ci);break}let a=this.Uh.Ve(i);if(a){b.Z.D.error(a),o();break}s(i);break;case x.gi.Rh:const u=z.fromJson(t.data,s,o,e,t.vi);if(null==u){b.Z.D.error(`Could not parse trigger data for trigger ${t.id}, ignoring.`),this.Uh.qe(t.id,d.Oe.ci);break}this.Uh.Ze(u,n,r);break;default:b.Z.D.error(`Trigger ${t.id} was of unexpected type ${t.type}, ignoring.`),this.Uh.qe(t.id,d.Oe.ci)}}je(t,e,n){if(!(0,O.fk)(C.Z,t,"Cannot fire trigger action.","TriggerEvents"))return;if(this.si.bl())return b.Z.D.info("Trigger sync is currently in progress, awaiting sync completion before firing trigger event."),void this.Kh.push(arguments);this.gg();const r=(new Date).valueOf(),i=r-this.Vh;let s=!0,o=!0;const a=[];for(let l=0;l<this.sg.length;l++){const n=this.sg[l],i=r+1e3*n.Ph;if(n.Mh(i)&&(null==n.startTime||n.startTime<=r)&&(null==n.endTime||n.endTime>=r)){let r=!1;for(let i=0;i<n.Th.length;i++)if(n.Th[i].qa(t,e)){r=!0;break}r&&(s=!1,this.fg(n,i,t)&&(o=!1,a.push(n)))}}if(s)return void b.Z.D.info(`Trigger event ${t} did not match any trigger conditions.`);if(o)return void b.Z.D.info(`Ignoring ${t} trigger event because a trigger was displayed ${i/1e3}s ago.`);a.sort(((t,e)=>t.priority-e.priority));const u=a.pop();null!=u&&(b.Z.D.info(`Firing ${u.type} trigger action ${u.id} from trigger event ${t}.`),this.ug(u,r,t,n,a),0===u.Ph?this.hg(u,r,t,n,a):this.Qh.push(setTimeout((()=>{this.hg(u,r,t,n,a)}),1e3*u.Ph)))}changeUser(t){if(this.sg=[],this.h.Xs(J.I.q.ba),!t){this.Kh=[],this.Vh=null,this.Yh={},this.Xh={};for(let t=0;t<this.Qh.length;t++)clearTimeout(this.Qh[t]);this.Qh=[],this.h.Xs(J.I.q.Ya),this.h.Xs(J.I.q.Ka),this.h.Xs(J.I.q.Da)}}clearData(){this.sg=[],this.Vh=null,this.Yh={},this.Xh={};for(let t=0;t<this.Qh.length;t++)clearTimeout(this.Qh[t]);this.Qh=[]}fg(t,e,n){if(null==this.Vh)return!0;if(n===C.Z.ks)return b.Z.D.info("Ignoring minimum interval between trigger because it is a test type."),!0;let r=t.Ih;return null==r&&(r=this.Oh),e-this.Vh>=1e3*r}ug(t,e,n,r,i){this.ig(),this.Xh[t.id]=this.Xh[t.id]||[];const s={};let o;s.di=e,s.og=n,null!=r&&(o=r.ss()),s.ng=o;const a=[];for(let u=0;u<i.length;u++)a.push(i[u].id);s.lg=a,this.Xh[t.id].push(s),this.h.B(J.I.q.Da,this.Xh)}cg(t,e){this.ig(),t.Bh(e),this.Vh=e,this.h.B(J.I.q.Ya,e),this.Yh[t.id]=e,this.h.B(J.I.q.Ka,this.Yh)}}const V={t:!1,provider:null,er:()=>(V.init(),V.provider),rg:()=>{if(!V.provider){const t=i.ZP.nn(i.JY.ho);V.provider=new H(null!=t?t:30,$.m().Be(),i.ZP.l(),i.ZP.mr(),$.m()),i.ZP.ar(V.provider)}},init:()=>{V.t||(V.rg(),i.ZP.u(V),V.t=!0)},destroy:()=>{V.provider=null,V.t=!1}}},73046:function(t,e,n){"use strict";n.d(e,{A9:function(){return o},yi:function(){return a},Tu:function(){return u},OL:function(){return l},je:function(){return h},zA:function(){return d}});var r=n(52367),i=n(8548),s=n(3905);const o={types:{ue:"container",logCustomEvent:"logCustomEvent",setEmailNotificationSubscriptionType:"setEmailNotificationSubscriptionType",setPushNotificationSubscriptionType:"setPushNotificationSubscriptionType",setCustomUserAttribute:"setCustomUserAttribute",requestPushPermission:"requestPushPermission",addToSubscriptionGroup:"addToSubscriptionGroup",removeFromSubscriptionGroup:"removeFromSubscriptionGroup",addToCustomAttributeArray:"addToCustomAttributeArray",removeFromCustomAttributeArray:"removeFromCustomAttributeArray",de:"openLink",pe:"openLinkInWebView"},properties:{type:"type",me:"steps",fe:"args"}},a={We:"unknownBrazeAction",Ye:"noPushPrompt"},u=(t,e)=>{switch(t){case a.We:return`${e} contains an unknown braze action type and will not be displayed.`;case a.Ye:return`${e} contains a push prompt braze action, but is not eligible for a push prompt. Ignoring.`;default:return""}};function l(t){try{let e=t.match(s.y9)[0].length;const n=t.substring(e);if(e>t.length-1||!n)return void r.Z.D.error(`Did not find base64 encoded brazeAction in url to process : ${t}`);const o=(0,i.T)(n);return o?JSON.parse(o):void r.Z.D.error(`Failed to decode base64 encoded brazeAction: ${n}`)}catch(e){return void r.Z.D.error(`Failed to process brazeAction URL ${t} : ${e.message}`)}}function c(t,e){let n=!1;for(const r of e)if(n=n||t(r),n)return!0;return!1}function h(t){try{const e=t[o.properties.type];return e===o.types.ue?c(h,t[o.properties.me]):!(0,s.OM)(e)}catch(t){return!0}}function d(t){if(!(0,s.zR)(t))return!1;const e=t[o.properties.type];return e===o.types.ue?c(d,t[o.properties.me]):e===o.types.requestPushPermission}},64365:function(t,e,n){"use strict";n.d(e,{Z:function(){return f}});var r=n(72893);class i{constructor(){}tf(){}ef(){}Ko(t){}static rf(t,e){if(t&&e)if(t=t.toLowerCase(),(0,r.kJ)(e.if)){for(let n=0;n<e.if.length;n++)if(-1!==t.indexOf(e.if[n].toLowerCase()))return e.identity}else if(-1!==t.indexOf(e.if.toLowerCase()))return e.identity}}const s={rE:"Chrome",eE:"Edge",vg:"Internet Explorer",EE:"Opera",yg:"Safari",oE:"Firefox"},o="Android",a="iOS",u="Mac",l="Windows";class c extends i{constructor(){if(super(),this.userAgentData=("undefined"!==typeof navigator?navigator:{userAgent:""}).userAgentData,this.userAgentData){const t=this.sc();this.browser=t.browser||"Unknown Browser",this.version=t.version||"Unknown Version"}}tf(){return this.browser}ef(){return this.version}Ko(t){if(this.OS)return Promise.resolve(this.OS);const e=e=>{for(let n=0;n<t.length;n++){const r=c.rf(e,t[n]);if(r)return this.OS=r,this.OS}return e};return this.userAgentData.platform?Promise.resolve(e(this.userAgentData.platform)):this.ic().then((t=>e(t.platform))).catch((()=>("undefined"!==typeof navigator?navigator:{userAgent:""}).platform))}sc(){const t={},e=this.userAgentData.brands;if(e&&e.length)for(const n of e){const e=this.nc(s),r=n.brand.match(e);if(r&&r.length>0){t.browser=r[0],t.version=n.version;break}}return t}nc(t){const e=[];for(const n in t)t[n]!==s.vg&&e.push(t[n]);return new RegExp("("+e.join("|")+")","i")}ic(){return this.userAgentData.getHighEntropyValues?this.userAgentData.getHighEntropyValues(["platform"]):Promise.reject()}}class h extends i{constructor(){super(),this.au=h.du(("undefined"!==typeof navigator?navigator:{userAgent:""}).userAgent||"")}tf(){return this.au[0]||"Unknown Browser"}ef(){return this.au[1]||"Unknown Version"}Ko(t){for(let e=0;e<t.length;e++){let n=t[e].string,r=h.rf(n,t[e]);if(r)return r===u&&("undefined"!==typeof navigator?navigator:{userAgent:""}).maxTouchPoints>1&&(r=a),Promise.resolve(r)}return Promise.resolve(("undefined"!==typeof navigator?navigator:{userAgent:""}).platform)}static du(t){let e,n=t.match(/(samsungbrowser|tizen|roku|konqueror|icab|crios|opera|ucbrowser|chrome|safari|firefox|camino|msie|trident(?=\/))\/?\s*(\.?\d+(\.\d+)*)/i)||[];if(/trident/i.test(n[1]))return e=/\brv[ :]+(\.?\d+(\.\d+)*)/g.exec(t)||[],[s.vg,e[1]||""];if(-1!==t.indexOf("(Web0S; Linux/SmartTV)"))return["LG Smart TV",null];if(-1!==t.indexOf("CrKey"))return["Chromecast",null];if(-1!==t.indexOf("BRAVIA")||-1!==t.indexOf("SonyCEBrowser")||-1!==t.indexOf("SonyDTV"))return["Sony Smart TV",null];if(-1!==t.indexOf("PhilipsTV"))return["Philips Smart TV",null];if(t.match(/\b(Roku)\b/))return["Roku",null];if(t.match(/\bAFTM\b/))return["Amazon Fire Stick",null];if(n[1]===s.rE&&(e=t.match(/\b(OPR|Edge|EdgA|Edg|UCBrowser)\/(\.?\d+(\.\d+)*)/),null!=e))return e=e.slice(1),e[0]=e[0].replace("OPR",s.EE),e[0]=e[0].replace("EdgA",s.eE),"Edg"===e[0]&&(e[0]=s.eE),[e[0],e[1]];if(n[1]===s.yg&&(e=t.match(/\b(EdgiOS)\/(\.?\d+(\.\d+)*)/),null!=e))return e=e.slice(1),e[0]=e[0].replace("EdgiOS",s.eE),[e[0],e[1]];if(n=n[2]?[n[1],n[2]]:[null,null],n[0]===s.yg&&null!=(e=t.match(/version\/(\.?\d+(\.\d+)*)/i))&&n.splice(1,1,e[1]),null!=(e=t.match(/\b(UCBrowser)\/(\.?\d+(\.\d+)*)/))&&n.splice(1,1,e[2]),n[0]===s.EE&&null!=(e=t.match(/mini\/(\.?\d+(\.\d+)*)/i)))return["Opera Mini",e[1]||""];if(n[0]){const t=n[0].toLowerCase();"msie"===t&&(n[0]=s.vg),"crios"===t&&(n[0]=s.rE),"tizen"===t&&(n[0]="Samsung Smart TV",n[1]=null),"samsungbrowser"===t&&(n[0]="Samsung Browser")}return n}}class d{constructor(){const t=("undefined"!==typeof navigator?navigator:{userAgent:""}).userAgentData?c:h;this.dg=new t,this.userAgent=("undefined"!==typeof navigator?navigator:{userAgent:""}).userAgent,this.browser=this.dg.tf(),this.version=this.dg.ef(),this.Ko().then((t=>this.OS=t)),this.language=(("undefined"!==typeof navigator?navigator:{userAgent:""}).userLanguage||("undefined"!==typeof navigator?navigator:{userAgent:""}).language||("undefined"!==typeof navigator?navigator:{userAgent:""}).browserLanguage||("undefined"!==typeof navigator?navigator:{userAgent:""}).systemLanguage||"").toLowerCase(),this.Do=d.Sg(this.userAgent)}bg(){return this.browser!==s.vg||this.version>8}La(){return this.browser===s.yg}qo(){return this.OS||null}Ko(){return this.OS?Promise.resolve(this.OS):this.dg.Ko(d.pg).then((t=>(this.OS=t,t)))}static Sg(t){t=t.toLowerCase();const e=["googlebot","bingbot","slurp","duckduckbot","baiduspider","yandex","facebookexternalhit","sogou","ia_archiver","https://github.com/prerender/prerender","aolbuild","bingpreview","msnbot","adsbot","mediapartners-google","teoma"];for(let n=0;n<e.length;n++)if(-1!==t.indexOf(e[n]))return!0;return!1}}d.pg=[{string:("undefined"!==typeof navigator?navigator:{userAgent:""}).platform,if:"Win",identity:l},{string:("undefined"!==typeof navigator?navigator:{userAgent:""}).platform,if:"Mac",identity:u},{string:("undefined"!==typeof navigator?navigator:{userAgent:""}).platform,if:"BlackBerry",identity:"BlackBerry"},{string:("undefined"!==typeof navigator?navigator:{userAgent:""}).platform,if:"FreeBSD",identity:"FreeBSD"},{string:("undefined"!==typeof navigator?navigator:{userAgent:""}).platform,if:"OpenBSD",identity:"OpenBSD"},{string:("undefined"!==typeof navigator?navigator:{userAgent:""}).platform,if:"Nintendo",identity:"Nintendo"},{string:("undefined"!==typeof navigator?navigator:{userAgent:""}).platform,if:"SunOS",identity:"SunOS"},{string:("undefined"!==typeof navigator?navigator:{userAgent:""}).platform,if:"PlayStation",identity:"PlayStation"},{string:("undefined"!==typeof navigator?navigator:{userAgent:""}).platform,if:"X11",identity:"X11"},{string:("undefined"!==typeof navigator?navigator:{userAgent:""}).userAgent,if:["iPhone","iPad","iPod"],identity:a},{string:("undefined"!==typeof navigator?navigator:{userAgent:""}).platform,if:"Pike v",identity:a},{string:("undefined"!==typeof navigator?navigator:{userAgent:""}).userAgent,if:["Web0S"],identity:"WebOS"},{string:("undefined"!==typeof navigator?navigator:{userAgent:""}).platform,if:["Linux armv7l","Android"],identity:o},{string:("undefined"!==typeof navigator?navigator:{userAgent:""}).userAgent,if:["Android"],identity:o},{string:("undefined"!==typeof navigator?navigator:{userAgent:""}).platform,if:"Linux",identity:"Linux"}];const f=new d},72893:function(t,e,n){"use strict";n.d(e,{VO:function(){return i},fk:function(){return s},kJ:function(){return o},J_:function(){return a},Kn:function(){return u},XP:function(){return l},Xy:function(){return c}});var r=n(52367);function i(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&e.push(t[n]);return e}function s(t,e,n,s){const o=i(t);return-1!==o.indexOf(e)||(r.Z.D.error(`${n} Valid values from ${s} are "${o.join('"/"')}".`),!1)}function o(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function a(t){return"[object Date]"===Object.prototype.toString.call(t)}function u(t){return"[object Object]"===Object.prototype.toString.call(t)}function l(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push(n);return e}function c(t,e){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;const n=t.toString();if(n!==e.toString())return!1;switch(n){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}const r="[object Array]"===n;if(!r){if("object"!=typeof t||"object"!=typeof e)return!1;const n=t.constructor,r=e.constructor;if(n!==r&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)&&"constructor"in t&&"constructor"in e)return!1}const i=[],s=[];let o=i.length;for(;o--;)if(i[o]===t)return s[o]===e;if(i.push(t),s.push(e),r){if(o=t.length,o!==e.length)return!1;for(;o--;)if(!c(t[o],e[o]))return!1}else{let n,r=l(t);if(o=r.length,l(e).length!==o)return!1;for(;o--;)if(n=r[o],!e.hasOwnProperty(n)||!c(t[n],e[n]))return!1}return i.pop(),s.pop(),!0}},2979:function(t,e,n){"use strict";n.d(e,{FX:function(){return i},Pn:function(){return s},X2:function(){return o},BT:function(){return a},Rd:function(){return u},_0:function(){return l},$N:function(){return c},yo:function(){return h}});var r=n(72893);function i(t,e){let n=t/1e3;return e&&(n=Math.floor(n)),n}function s(t){return 1e3*t}function o(t){const e=parseInt(t);return null==t||isNaN(e)?null:new Date(1e3*e)}function a(t){return null!=t&&(0,r.J_)(t)?t.toISOString().replace(/\.[0-9]{3}Z$/,""):t}function u(t){return null==t||""===t?null:new Date(t)}function l(t){return null==t||""===t?(new Date).valueOf():t}function c(t){return((new Date).valueOf()-t.valueOf())/1e3}function h(t){return(t.valueOf()-(new Date).valueOf())/1e3}},96504:function(t,e,n){"use strict";n.d(e,{R:function(){return r}});const r=(t,e)=>(t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t)},41843:function(t,e,n){"use strict";var r=n(52367),i=n(63826);const s={Hs:t=>{let e,n;try{const s=()=>{r.Z.D.error("This browser does not have any supported ajax options!")};if(window.XMLHttpRequest?(e=new XMLHttpRequest,e||s()):s(),null!=e){const r=()=>{"function"==typeof t.error&&t.error(e.status),"function"==typeof t.fl&&t.fl(!1)};e.onload=()=>{let n=!1;if(4===e.readyState)if(n=e.status>=200&&e.status<300||304===e.status,n){if("function"==typeof t.S){let r,s;try{r=JSON.parse(e.responseText),s=e.getAllResponseHeaders()}catch(n){const r={error:""===e.responseText?i.Z.oa:i.Z.ha,response:e.responseText};t.S(r,s)}r&&t.S(r,s)}"function"==typeof t.fl&&t.fl(!0)}else r()},e.onerror=()=>{r()},e.ontimeout=()=>{r()},n=JSON.stringify(t.data),e.open("POST",t.url,!0),e.setRequestHeader("Content-type","application/json"),e.setRequestHeader("X-Requested-With","XMLHttpRequest");const s=t.headers||[];for(const t of s)e.setRequestHeader(t[0],t[1]);e.send(n)}}catch(t){r.Z.D.error(`Network request error: ${t.message}`)}}};e.Z=s},8548:function(t,e,n){"use strict";n.d(e,{E:function(){return i},T:function(){return s}});var r=n(52367);function i(t){let e=t.length;for(let n=t.length-1;n>=0;n--){const r=t.charCodeAt(n);r>127&&r<=2047?e++:r>2047&&r<=65535&&(e+=2),r>=56320&&r<=57343&&n--}return e}function s(t){try{t=t.replace(/-/g,"+").replace(/_/g,"/");let e=window.atob(t),n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);let r=new Uint16Array(n.buffer);return String.fromCharCode(...r)}catch(t){return r.Z.D.error("Unable to decode Base64: "+t),null}}},3905:function(t,e,n){"use strict";n.d(e,{y9:function(){return a},ro:function(){return u},zM:function(){return l},vV:function(){return c},zR:function(){return h},OM:function(){return d}});var r=n(52367),i=n(73046);const s=/^[^\x00-\x1F\x22]+$/,o=new RegExp(/^.+@.+\..+$/),a=/^brazeActions:\/\/v\d+\//;function u(t,e,n,i){const s="string"==typeof t||null===t&&i;return s||r.Z.D.error(`Cannot ${e} because ${n} "${t}" is invalid.`),s}function l(t,e,n){const i=null!=t&&"string"==typeof t&&(""===t||t.match(s));return i||r.Z.D.error(`Cannot ${e} because ${n} "${t}" is invalid.`),i}function c(t){return"string"==typeof t&&null!=t.toLowerCase().match(o)}function h(t){if(!(i.A9.properties.type in t))return!1;switch(t[i.A9.properties.type]){case i.A9.types.ue:if(i.A9.properties.me in t)return!0;break;case i.A9.types.logCustomEvent:case i.A9.types.setEmailNotificationSubscriptionType:case i.A9.types.setPushNotificationSubscriptionType:case i.A9.types.setCustomUserAttribute:case i.A9.types.addToSubscriptionGroup:case i.A9.types.removeFromSubscriptionGroup:case i.A9.types.addToCustomAttributeArray:case i.A9.types.removeFromCustomAttributeArray:case i.A9.types.de:case i.A9.types.pe:if(i.A9.properties.fe in t)return!0;break;case i.A9.types.requestPushPermission:return!0;default:return!1}return!1}function d(t){let e=!1;return Object.keys(i.A9.types).forEach((n=>{i.A9.types[n]!==t.toString()||(e=!0)})),e}},75319:function(t,e,n){"use strict";n.d(e,{SD:function(){return s}});const r=0,i=1;const s={openUri:function(t,e,n){e||null!=n&&n.metaKey?window.open(t):window.location=t},so:function(){return screen.width<=600},io:function(){if("orientation"in window)return 90===Math.abs(window.orientation)||270===window.orientation?i:r;if("screen"in window){let t=window.screen.orientation||screen.mozOrientation||screen.msOrientation;return null!=t&&"object"==typeof t&&(t=t.type),"landscape-primary"===t||"landscape-secondary"===t?i:r}return r},hn:function(){return window.location.href}}}},i={};function s(t){var e=i[t];if(void 0!==e)return e.exports;var n=i[t]={exports:{}};return r[t].call(n.exports,n,n.exports,s),n.exports}s.m=r,s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,{a:e}),e},e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__},s.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var i=Object.create(null);s.r(i);var o={};t=t||[null,e({}),e([]),e(e)];for(var a=2&r&&n;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((function(t){o[t]=function(){return n[t]}}));return o.default=function(){return n},s.d(i,o),i},s.d=function(t,e){for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},s.f={},s.e=function(t){return Promise.all(Object.keys(s.f).reduce((function(e,n){return s.f[n](t,e),e}),[]))},s.u=function(t){return"js/"+t+"-"+{761:"ed139089bc5c28c3a3e8",7090:"fb6718a5f35d5b28f7f9"}[t]+".chunk.js"},s.miniCssF=function(t){},s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n={},s.l=function(t,e,r,i){if(n[t])n[t].push(e);else{var o,a;if(void 0!==r)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var c=u[l];if(c.getAttribute("src")==t){o=c;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.src=t),n[t]=[e];var h=function(e,r){o.onerror=o.onload=null,clearTimeout(d);var i=n[t];if(delete n[t],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((function(t){return t(r)})),e)return e(r)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),a&&document.head.appendChild(o)}},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.p="https://cdn-assets.alltrails.com/assets/packs/",function(){var t={3712:0,124:0};s.f.j=function(e,n){var r=s.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((function(n,i){r=t[e]=[n,i]}));n.push(r[2]=i);var o=s.p+s.u(e),a=new Error;s.l(o,(function(n){if(s.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,r[1](a)}}),"chunk-"+e,e)}};var e=function(e,n){var r,i,o=n[0],a=n[1],u=n[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(r in a)s.o(a,r)&&(s.m[r]=a[r]);if(u)u(s)}for(e&&e(n);l<o.length;l++)i=o[l],s.o(t,i)&&t[i]&&t[i][0](),t[o[l]]=0},n=this.webpackChunk=this.webpackChunk||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}(),function(){"use strict";var t=s(57801);var e=s(8548),n=s(52367),r=s(17615),i=s(3905);var o=s(24365),a=s(95280);var u=s(22338),l=s(64061),c=s.n(l);s(23886),s(25172);var h,d,f=s.g.__AT_DATA__;if(f){var g;if(f.BRAZE_KEY)h=f.BRAZE_KEY,d={baseUrl:"https://sdk.iad-03.braze.com"},t.ZP.initialize(h,d),f.store.user&&function(s,o){!!t.ZP.rr()&&(null==s||0===s.length||s!=s?n.Z.D.error("changeUser requires a non-empty userId."):(0,e.E)(s)>r.Z.ee?n.Z.D.error(`Rejected user id "${s}" because it is longer than ${r.Z.ee} bytes.`):!(null!=o&&!(0,i.ro)(o,"set signature for new user","signature"))&&t.ZP.mr().changeUser(s.toString(),t.ZP.re(),o))}(String(f.store.user.id)),null===(g=function(){if(t.ZP.rr())return t.ZP.gr()}())||void 0===g||g.setCustomUserAttribute("is_community_beta_enabled",!0),function(){if(!t.ZP.rr())return;t.ZP.mr().openSession();const e=n.Z.xt.Ft,r=new n.Z.qt(e,n.Z.D);r.hr(e.$t.jr,(function(i,s){const u=s.lastClick,l=s.trackingString;n.Z.D.info(`Firing push click trigger from ${l} push click at ${u}`);const c=t.ZP.mr().kr(u,l),h=function(){a.n.er().je(o.Z.vr,[l],c)};t.ZP.mr().zr(h,h),r.br(e.$t.jr,i)})),r.Jt(e.$t.$r,(function(e){t.ZP.mr().wr(e)}))}();f.store.user&&(0,u.setProperties)({is_community_beta_enabled:!0}),function(){var t,e;if(null===(t=window)||void 0===t?void 0:t.Bugsnag)return window.Bugsnag;var n=s.g.__AT_DATA__;if(!n)return console.warn("useBugsnag: not starting Bugsnag as the global store is not defined"),null;var r=null,i={is_pro_user:"false",is_logged_in_user:"false",is_admin_user:"false"};if(null===n||void 0===n||null===(e=n.store)||void 0===e?void 0:e.user){var o=n.store.user;r={id:o.id.toString()},i.is_pro_user=o.pro.toString(),i.is_logged_in_user="true",i.is_admin_user=o.admin.toString()}c().start({apiKey:n.BUGSNAG_KEY,appVersion:n.BUILD_DATE,releaseStage:n.RAILS_ENV,user:r,metadata:i}),window.Bugsnag=c(),c()}(),s.g.branch.init(f.BRANCH_KEY,{metadata:f.branchMetadata})}window.lazySizesConfig={expand:10},document.addEventListener("lazybeforeunveil",(function(t){var e=t.target,n=e.getAttribute("data-bg");n&&(n.indexOf("url")<0&&(n="url('".concat(n,"')")),")"==n.slice(-1)?e.style.backgroundImage=n:e.style.background=n)})),s.e(7090).then(s.t.bind(s,77090,23))}()}();
//# sourceMappingURL=shared-3b396f0795865eec1d2f.js.map